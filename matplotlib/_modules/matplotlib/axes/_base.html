
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>matplotlib.axes._base &#8212; Matplotlib 3.3.1 documentation</title>
    <link rel="stylesheet" href="../../../_static/mpl.css?v3.3.1-dirty" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/gallery-dataframe.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 3.3.1 documentation"
          href="../../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<link rel="top" title="Matplotlib 3.3.1 documentation" href="#" />
    <link rel="canonical" href="https://matplotlib.org/3.3.1/_modules/matplotlib/axes/_base.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>


<!--
<div id="annc-banner">

</div>
-->

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px; position: relative;">
    <a href="../../../index.html">
        <div style="float: left; position: absolute; width: 496px; bottom: 0; padding-bottom: 24px"><span style="float: right; color: #789; background: white">Version 3.3.1</span></div>
        <img src="../../../_static/logo2_compressed.svg" height="125px" border="0" alt="matplotlib"/></a>

    <!-- The "Fork me on github" ribbon -->
    <div id="forkongithub"><a href="https://github.com/matplotlib/matplotlib">Fork me on GitHub</a></div>
    </div>

    <nav class="main-nav">
        <ul>
            <li><a href="../../../users/installing.html">Installation</a></li>
            <li><a href="../../../contents.html">Documentation</a></li>
            <li><a href="../../../gallery/index.html">Examples</a></li>
            <li><a href="../../../tutorials/index.html">Tutorials</a></li>
            <li><a href="../../../devel/index.html">Contributing</a></li>
            <li class="nav-right">
                <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" aria-labelledby="searchlabel" placeholder="Search"/>
                </form>
            </li>
        </ul>
     </nav>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../../contents.html">contents</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../matplotlib.html" accesskey="U">matplotlib</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">matplotlib.axes._base</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../contents.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  <li><a href="../../matplotlib.html">matplotlib</a><ul>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for matplotlib.axes._base</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">ExitStack</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">numbers</span> <span class="kn">import</span> <span class="n">Real</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">attrgetter</span>
<span class="kn">import</span> <span class="nn">types</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">cbook</span>
<span class="kn">from</span> <span class="nn">matplotlib.cbook</span> <span class="kn">import</span> <span class="n">_OrderedSet</span><span class="p">,</span> <span class="n">_check_1d</span><span class="p">,</span> <span class="n">index_of</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">docstring</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">mcolors</span>
<span class="kn">import</span> <span class="nn">matplotlib.lines</span> <span class="k">as</span> <span class="nn">mlines</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
<span class="kn">import</span> <span class="nn">matplotlib.artist</span> <span class="k">as</span> <span class="nn">martist</span>
<span class="kn">import</span> <span class="nn">matplotlib.transforms</span> <span class="k">as</span> <span class="nn">mtransforms</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mticker</span>
<span class="kn">import</span> <span class="nn">matplotlib.axis</span> <span class="k">as</span> <span class="nn">maxis</span>
<span class="kn">import</span> <span class="nn">matplotlib.spines</span> <span class="k">as</span> <span class="nn">mspines</span>
<span class="kn">import</span> <span class="nn">matplotlib.font_manager</span> <span class="k">as</span> <span class="nn">font_manager</span>
<span class="kn">import</span> <span class="nn">matplotlib.text</span> <span class="k">as</span> <span class="nn">mtext</span>
<span class="kn">import</span> <span class="nn">matplotlib.image</span> <span class="k">as</span> <span class="nn">mimage</span>
<span class="kn">from</span> <span class="nn">matplotlib.rcsetup</span> <span class="kn">import</span> <span class="n">cycler</span><span class="p">,</span> <span class="n">validate_axisbelow</span>

<span class="n">_log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">_axis_method_wrapper</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper to generate Axes methods wrapping Axis methods.</span>

<span class="sd">    After ::</span>

<span class="sd">        get_foo = _axis_method_wrapper(&quot;xaxis&quot;, &quot;get_bar&quot;)</span>

<span class="sd">    (in the body of a class) ``get_foo`` is a method that forwards it arguments</span>
<span class="sd">    to the ``get_bar`` method of the ``xaxis`` attribute, and gets its</span>
<span class="sd">    signature and docstring from ``Axis.get_bar``.</span>

<span class="sd">    The docstring of ``get_foo`` is built by replacing &quot;this Axis&quot; by &quot;the</span>
<span class="sd">    {attr_name}&quot; (i.e., &quot;the xaxis&quot;, &quot;the yaxis&quot;) in the wrapped method&#39;s</span>
<span class="sd">    docstring; additional replacements can by given in *doc_sub*.  The</span>
<span class="sd">    docstring is also dedented to simplify further manipulations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">doc_sub</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attr_name</span> <span class="o">=</span> <span class="n">attr_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doc_sub</span> <span class="o">=</span> <span class="n">doc_sub</span>

    <span class="k">def</span> <span class="nf">__set_name__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="c1"># This is called at the end of the class body as</span>
        <span class="c1"># ``self.__set_name__(cls, name_under_which_self_is_assigned)``; we</span>
        <span class="c1"># rely on that to give the wrapper the correct __name__/__qualname__.</span>
        <span class="n">get_method</span> <span class="o">=</span> <span class="n">attrgetter</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attr_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">get_method</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">wrapper</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">=</span> <span class="n">owner</span><span class="o">.</span><span class="vm">__module__</span>
        <span class="n">wrapper</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">wrapper</span><span class="o">.</span><span class="vm">__qualname__</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">owner</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="c1"># Manually copy the signature instead of using functools.wraps because</span>
        <span class="c1"># displaying the Axis method source when asking for the Axes method</span>
        <span class="c1"># source would be confusing.</span>
        <span class="n">wrapped_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">maxis</span><span class="o">.</span><span class="n">Axis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">)</span>
        <span class="n">wrapper</span><span class="o">.</span><span class="n">__signature__</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">wrapped_method</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">wrapped_method</span><span class="o">.</span><span class="vm">__doc__</span>
        <span class="k">if</span> <span class="n">doc</span><span class="p">:</span>
            <span class="n">doc_sub</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;this Axis&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attr_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                       <span class="o">**</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doc_sub</span> <span class="ow">or</span> <span class="p">{})}</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">doc_sub</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">assert</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">,</span> \
                    <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The definition of </span><span class="si">{</span><span class="n">wrapper</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2"> expected that &quot;</span>
                     <span class="sa">f</span><span class="s2">&quot;the docstring of Axis.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="si">}</span><span class="s2"> contains &quot;</span>
                     <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">!r}</span><span class="s2"> as a substring.&quot;</span><span class="p">)</span>
                <span class="n">doc</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
            <span class="n">wrapper</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">cleandoc</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>

        <span class="nb">setattr</span><span class="p">(</span><span class="n">owner</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">wrapper</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_process_plot_format</span><span class="p">(</span><span class="n">fmt</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a MATLAB style color/line style format string to a (*linestyle*,</span>
<span class="sd">    *marker*, *color*) tuple.</span>

<span class="sd">    Example format strings include:</span>

<span class="sd">    * &#39;ko&#39;: black circles</span>
<span class="sd">    * &#39;.b&#39;: blue dots</span>
<span class="sd">    * &#39;r--&#39;: red dashed lines</span>
<span class="sd">    * &#39;C2--&#39;: the third color in the color cycle, dashed lines</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    matplotlib.Line2D.lineStyles, matplotlib.colors.cnames</span>
<span class="sd">        All possible styles and color format strings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">linestyle</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Is fmt just a colorspec?</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>

        <span class="c1"># We need to differentiate grayscale &#39;1.0&#39; from tri_down marker &#39;1&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fmtint</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>  <span class="c1"># Yes</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fmt</span> <span class="o">!=</span> <span class="n">fmtint</span><span class="p">:</span>
                <span class="c1"># user definitely doesn&#39;t want tri_down marker</span>
                <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>  <span class="c1"># Yes</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># ignore converted color</span>
                <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c1"># No, not just a color.</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">fmt</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">fmt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fmt</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="n">mlines</span><span class="o">.</span><span class="n">lineStyles</span><span class="p">:</span>  <span class="c1"># First, the two-char styles.</span>
            <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Illegal format string &quot;</span><span class="si">%s</span><span class="s1">&quot;; two linestyle symbols&#39;</span> <span class="o">%</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">linestyle</span> <span class="o">=</span> <span class="n">fmt</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mlines</span><span class="o">.</span><span class="n">lineStyles</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Illegal format string &quot;</span><span class="si">%s</span><span class="s1">&quot;; two linestyle symbols&#39;</span> <span class="o">%</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">linestyle</span> <span class="o">=</span> <span class="n">c</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mlines</span><span class="o">.</span><span class="n">lineMarkers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Illegal format string &quot;</span><span class="si">%s</span><span class="s1">&quot;; two marker symbols&#39;</span> <span class="o">%</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">c</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">get_named_colors_mapping</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Illegal format string &quot;</span><span class="si">%s</span><span class="s1">&quot;; two color symbols&#39;</span> <span class="o">%</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">c</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">color_cycle_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fmt</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="s2">&quot;C</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">color_cycle_number</span><span class="p">))</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Unrecognized character </span><span class="si">%c</span><span class="s1"> in format string&#39;</span> <span class="o">%</span> <span class="n">c</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;lines.linestyle&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>

    <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>


<span class="k">class</span> <span class="nc">_process_plot_var_args</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process variable length arguments to `~.Axes.plot`, to support ::</span>

<span class="sd">      plot(t, s)</span>
<span class="sd">      plot(t1, s1, t2, s2)</span>
<span class="sd">      plot(t1, s1, &#39;ko&#39;, t2, s2)</span>
<span class="sd">      plot(t1, s1, &#39;ko&#39;, t2, s2, &#39;r--&#39;, t3, e3)</span>

<span class="sd">    an arbitrary number of *x*, *y*, *fmt* are allowed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="n">command</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># note: it is not possible to pickle a generator (and thus a cycler).</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;axes&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span> <span class="s1">&#39;command&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_prop_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Can&#39;t do `args == (None,)` as that crashes cycler.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">args</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.prop_cycle&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">cycler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="n">prop_cycler</span><span class="p">)</span>
        <span class="c1"># This should make a copy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prop_keys</span> <span class="o">=</span> <span class="n">prop_cycler</span><span class="o">.</span><span class="n">keys</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">_process_unit_info</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">pos_only</span> <span class="ow">in</span> <span class="s2">&quot;xy&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pos_only</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> got an unexpected keyword argument </span><span class="si">{!r}</span><span class="s2">&quot;</span>
                                <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="p">,</span> <span class="n">pos_only</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Process dict views</span>
            <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">cbook</span><span class="o">.</span><span class="n">sanitize_sequence</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Process the &#39;data&#39; kwarg.</span>
            <span class="n">replaced</span> <span class="o">=</span> <span class="p">[</span><span class="n">mpl</span><span class="o">.</span><span class="n">_replacer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">label_namer_idx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># Can be x, y or y, c.</span>
                <span class="c1"># Figure out what the second argument is.</span>
                <span class="c1"># 1) If the second argument cannot be a format shorthand, the</span>
                <span class="c1">#    second argument is the label_namer.</span>
                <span class="c1"># 2) Otherwise (it could have been a format shorthand),</span>
                <span class="c1">#    a) if we did perform a substitution, emit a warning, and</span>
                <span class="c1">#       use it as label_namer.</span>
                <span class="c1">#    b) otherwise, it is indeed a format shorthand; use the</span>
                <span class="c1">#       first argument as label_namer.</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">_process_plot_format</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>  <span class="c1"># case 1)</span>
                    <span class="n">label_namer_idx</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">replaced</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>  <span class="c1"># case 2a)</span>
                        <span class="n">cbook</span><span class="o">.</span><span class="n">_warn_external</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Second argument </span><span class="si">{</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">!r}</span><span class="s2"> is ambiguous: could &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;be a format string but is in &#39;data&#39;; using as &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;data.  If it was intended as data, set the &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;format string to an empty string to suppress &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;this warning.  If it was intended as a format &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;string, explicitly pass the x-values as well.  &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;Alternatively, rename the entry in &#39;data&#39;.&quot;</span><span class="p">,</span>
                            <span class="ne">RuntimeWarning</span><span class="p">)</span>
                        <span class="n">label_namer_idx</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">else</span><span class="p">:</span>  <span class="c1"># case 2b)</span>
                        <span class="n">label_namer_idx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">label_namer_idx</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Using arbitrary long args with data is not supported due &quot;</span>
                    <span class="s2">&quot;to ambiguity of arguments; use multiple plotting calls &quot;</span>
                    <span class="s2">&quot;instead&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">_label_from_arg</span><span class="p">(</span>
                    <span class="n">replaced</span><span class="p">[</span><span class="n">label_namer_idx</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="n">label_namer_idx</span><span class="p">])</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">replaced</span>

        <span class="c1"># Repeatedly grab (x, y) or (x, y, format) from the front of args and</span>
        <span class="c1"># massage them into arguments to plot() or fill().</span>

        <span class="k">while</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">this</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">this</span> <span class="o">+=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_args</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_next_color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the next color in the cycle.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;color&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prop_keys</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;k&#39;</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prop_cycler</span><span class="p">)[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_getdefaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore</span><span class="p">,</span> <span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If some keys in the property cycle (excluding those in the set</span>
<span class="sd">        *ignore*) are absent or set to None in the dict *kw*, return a copy</span>
<span class="sd">        of the next entry in the property cycle, excluding keys in *ignore*.</span>
<span class="sd">        Otherwise, don&#39;t advance the property cycle, and return an empty dict.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prop_keys</span> <span class="o">-</span> <span class="n">ignore</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">prop_keys</span><span class="p">):</span>
            <span class="c1"># Need to copy this dictionary or else the next time around</span>
            <span class="c1"># in the cycle, the dictionary could be missing entries.</span>
            <span class="n">default_dict</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prop_cycler</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ignore</span><span class="p">:</span>
                <span class="n">default_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">default_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">default_dict</span>

    <span class="k">def</span> <span class="nf">_setdefaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">defaults</span><span class="p">,</span> <span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add to the dict *kw* the entries in the dict *default* that are absent</span>
<span class="sd">        or set to None in *kw*.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">defaults</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kw</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_makeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kw</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">kw</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">}</span>  <span class="c1"># Don&#39;t modify the original kw.</span>
        <span class="n">default_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getdefaults</span><span class="p">(</span><span class="nb">set</span><span class="p">(),</span> <span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
        <span class="n">seg</span> <span class="o">=</span> <span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seg</span>

    <span class="k">def</span> <span class="nf">_makefill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Polygon doesn&#39;t directly support unitized inputs.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="n">kw</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Don&#39;t modify the original kw.</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Ignore &#39;marker&#39;-related properties as they aren&#39;t Polygon</span>
        <span class="c1"># properties, but they are Line2D properties, and so they are</span>
        <span class="c1"># likely to appear in the default cycler construction.</span>
        <span class="c1"># This is done here to the defaults dictionary as opposed to the</span>
        <span class="c1"># other two dictionaries because we do want to capture when a</span>
        <span class="c1"># *user* explicitly specifies a marker which should be an error.</span>
        <span class="c1"># We also want to prevent advancing the cycler if there are no</span>
        <span class="c1"># defaults needed after ignoring the given properties.</span>
        <span class="n">ignores</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;marker&#39;</span><span class="p">,</span> <span class="s1">&#39;markersize&#39;</span><span class="p">,</span> <span class="s1">&#39;markeredgecolor&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;markerfacecolor&#39;</span><span class="p">,</span> <span class="s1">&#39;markeredgewidth&#39;</span><span class="p">}</span>
        <span class="c1"># Also ignore anything provided by *kwargs*.</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ignores</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

        <span class="c1"># Only using the first dictionary to use as basis</span>
        <span class="c1"># for getting defaults for back-compat reasons.</span>
        <span class="c1"># Doing it with both seems to mess things up in</span>
        <span class="c1"># various places (probably due to logic bugs elsewhere).</span>
        <span class="n">default_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getdefaults</span><span class="p">(</span><span class="n">ignores</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>

        <span class="c1"># Looks like we don&#39;t want &quot;color&quot; to be interpreted to</span>
        <span class="c1"># mean both facecolor and edgecolor for some reason.</span>
        <span class="c1"># So the &quot;kw&quot; dictionary is thrown out, and only its</span>
        <span class="c1"># &#39;color&#39; value is kept and translated as a &#39;facecolor&#39;.</span>
        <span class="c1"># This design should probably be revisited as it increases</span>
        <span class="c1"># complexity.</span>
        <span class="n">facecolor</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># Throw out &#39;color&#39; as it is now handled as a facecolor</span>
        <span class="n">default_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># To get other properties set from the cycler</span>
        <span class="c1"># modify the kwargs dictionary.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

        <span class="n">seg</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)),</span>
                               <span class="n">facecolor</span><span class="o">=</span><span class="n">facecolor</span><span class="p">,</span>
                               <span class="n">fill</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                               <span class="n">closed</span><span class="o">=</span><span class="n">kw</span><span class="p">[</span><span class="s1">&#39;closed&#39;</span><span class="p">])</span>
        <span class="n">seg</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seg</span>

    <span class="k">def</span> <span class="nf">_plot_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tup</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">_process_plot_format</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">tup</span> <span class="o">=</span> <span class="n">tup</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;third arg must be a format string&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="c1"># Don&#39;t allow any None value; these would be up-converted to one</span>
        <span class="c1"># element array of None which causes problems downstream.</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tup</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;x, y, and format string must not be None&quot;</span><span class="p">)</span>

        <span class="n">kw</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">((</span><span class="s1">&#39;linestyle&#39;</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kw</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">index_of</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x and y must have same first dimension, but &quot;</span>
                             <span class="sa">f</span><span class="s2">&quot;have shapes </span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">y</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x and y can be no greater than 2-D, but have &quot;</span>
                             <span class="sa">f</span><span class="s2">&quot;shapes </span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">y</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;plot&#39;</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeline</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;closed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;closed&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makefill</span>

        <span class="n">ncx</span><span class="p">,</span> <span class="n">ncy</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ncx</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">ncy</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">ncx</span> <span class="o">!=</span> <span class="n">ncy</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x has </span><span class="si">{</span><span class="n">ncx</span><span class="si">}</span><span class="s2"> columns but y has </span><span class="si">{</span><span class="n">ncy</span><span class="si">}</span><span class="s2"> columns&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">[:,</span> <span class="n">j</span> <span class="o">%</span> <span class="n">ncx</span><span class="p">],</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">j</span> <span class="o">%</span> <span class="n">ncy</span><span class="p">],</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">ncx</span><span class="p">,</span> <span class="n">ncy</span><span class="p">))]</span>


<span class="nd">@cbook</span><span class="o">.</span><span class="n">_define_aliases</span><span class="p">({</span><span class="s2">&quot;facecolor&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;fc&quot;</span><span class="p">]})</span>
<span class="k">class</span> <span class="nc">_AxesBase</span><span class="p">(</span><span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;rectilinear&quot;</span>

    <span class="n">_shared_x_axes</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Grouper</span><span class="p">()</span>
    <span class="n">_shared_y_axes</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Grouper</span><span class="p">()</span>
    <span class="n">_twinned_axes</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Grouper</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">(</span><span class="si">{1[0]:g}</span><span class="s2">,</span><span class="si">{1[1]:g}</span><span class="s2">;</span><span class="si">{1[2]:g}</span><span class="s2">x</span><span class="si">{1[3]:g}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span>
                 <span class="n">facecolor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># defaults to rc axes.facecolor</span>
                 <span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">sharex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># use Axes instance&#39;s xaxis info</span>
                 <span class="n">sharey</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># use Axes instance&#39;s yaxis info</span>
                 <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">xscale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">yscale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">box_aspect</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span>
                 <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build an axes in a figure.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fig : `~matplotlib.figure.Figure`</span>
<span class="sd">            The axes is build in the `.Figure` *fig*.</span>

<span class="sd">        rect : [left, bottom, width, height]</span>
<span class="sd">            The axes is build in the rectangle *rect*. *rect* is in</span>
<span class="sd">            `.Figure` coordinates.</span>

<span class="sd">        sharex, sharey : `~.axes.Axes`, optional</span>
<span class="sd">            The x or y `~.matplotlib.axis` is shared with the x or</span>
<span class="sd">            y axis in the input `~.axes.Axes`.</span>

<span class="sd">        frameon : bool, default: True</span>
<span class="sd">            Whether the axes frame is visible.</span>

<span class="sd">        box_aspect : None, or a number, optional</span>
<span class="sd">            Sets the aspect of the axes box. See `~.axes.Axes.set_box_aspect`</span>
<span class="sd">            for details.</span>

<span class="sd">        **kwargs</span>
<span class="sd">            Other optional keyword arguments:</span>

<span class="sd">            %(Axes)s</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        `~.axes.Axes`</span>
<span class="sd">            The new `~.axes.Axes` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">rect</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="n">rect</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">width</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Width and height specified must be non-negative&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_originalPosition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aspect</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="s1">&#39;box&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_anchor</span> <span class="o">=</span> <span class="s1">&#39;C&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale_viewlim_x</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale_viewlim_y</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_box_aspect</span><span class="p">(</span><span class="n">box_aspect</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axes_locator</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Optionally set via update(kwargs).</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_axes_spines</span><span class="p">()</span>

        <span class="c1"># this call may differ for non-sep axes, e.g., polar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_axis</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">facecolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">facecolor</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.facecolor&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_facecolor</span> <span class="o">=</span> <span class="n">facecolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span> <span class="o">=</span> <span class="n">frameon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_axisbelow</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.axisbelow&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">sharex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sharex</span><span class="p">(</span><span class="n">sharex</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sharey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sharey</span><span class="p">(</span><span class="n">sharey</span><span class="p">)</span>

        <span class="c1"># funcs used to format x and y - fall back on major formatters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_xdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_ydata</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_navigate_mode</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xscale</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="n">xscale</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">yscale</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="n">yscale</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="s1">&#39;units finalize&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_units_changed</span><span class="p">(</span><span class="n">scalex</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ycid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="s1">&#39;units finalize&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_units_changed</span><span class="p">(</span><span class="n">scaley</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

        <span class="n">rcParams</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
            <span class="n">top</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.top&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.top&#39;</span><span class="p">],</span>
            <span class="n">bottom</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.bottom&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.bottom&#39;</span><span class="p">],</span>
            <span class="n">labeltop</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labeltop&#39;</span><span class="p">]</span> <span class="ow">and</span>
                      <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.top&#39;</span><span class="p">]),</span>
            <span class="n">labelbottom</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labelbottom&#39;</span><span class="p">]</span> <span class="ow">and</span>
                         <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.bottom&#39;</span><span class="p">]),</span>
            <span class="n">left</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.left&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.left&#39;</span><span class="p">],</span>
            <span class="n">right</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.right&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.right&#39;</span><span class="p">],</span>
            <span class="n">labelleft</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelleft&#39;</span><span class="p">]</span> <span class="ow">and</span>
                       <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.left&#39;</span><span class="p">]),</span>
            <span class="n">labelright</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelright&#39;</span><span class="p">]</span> <span class="ow">and</span>
                        <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.right&#39;</span><span class="p">]),</span>
            <span class="n">which</span><span class="o">=</span><span class="s1">&#39;minor&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
            <span class="n">top</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.top&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.major.top&#39;</span><span class="p">],</span>
            <span class="n">bottom</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.bottom&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.major.bottom&#39;</span><span class="p">],</span>
            <span class="n">labeltop</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labeltop&#39;</span><span class="p">]</span> <span class="ow">and</span>
                      <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.major.top&#39;</span><span class="p">]),</span>
            <span class="n">labelbottom</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labelbottom&#39;</span><span class="p">]</span> <span class="ow">and</span>
                         <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.major.bottom&#39;</span><span class="p">]),</span>
            <span class="n">left</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.left&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.major.left&#39;</span><span class="p">],</span>
            <span class="n">right</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.right&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.major.right&#39;</span><span class="p">],</span>
            <span class="n">labelleft</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelleft&#39;</span><span class="p">]</span> <span class="ow">and</span>
                       <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.major.left&#39;</span><span class="p">]),</span>
            <span class="n">labelright</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelright&#39;</span><span class="p">]</span> <span class="ow">and</span>
                        <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.major.right&#39;</span><span class="p">]),</span>
            <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_layoutbox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_poslayoutbox</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># The renderer should be re-created by the figure, and then cached at</span>
        <span class="c1"># that point.</span>
        <span class="n">state</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_layoutbox&#39;</span><span class="p">,</span> <span class="s1">&#39;_poslayoutbox&#39;</span><span class="p">]:</span>
            <span class="n">state</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Prune the sharing &amp; twinning info to only contain the current group.</span>
        <span class="k">for</span> <span class="n">grouper_name</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="s1">&#39;_shared_x_axes&#39;</span><span class="p">,</span> <span class="s1">&#39;_shared_y_axes&#39;</span><span class="p">,</span> <span class="s1">&#39;_twinned_axes&#39;</span><span class="p">]:</span>
            <span class="n">grouper</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grouper_name</span><span class="p">)</span>
            <span class="n">state</span><span class="p">[</span><span class="n">grouper_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">grouper</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                                   <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">grouper</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">state</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="c1"># Merge the grouping info back into the global groupers.</span>
        <span class="k">for</span> <span class="n">grouper_name</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="s1">&#39;_shared_x_axes&#39;</span><span class="p">,</span> <span class="s1">&#39;_shared_y_axes&#39;</span><span class="p">,</span> <span class="s1">&#39;_twinned_axes&#39;</span><span class="p">]:</span>
            <span class="n">siblings</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">grouper_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">siblings</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grouper_name</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">siblings</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the axes bounding box in display space; *args* and *kwargs*</span>
<span class="sd">        are empty.</span>

<span class="sd">        This bounding box does not include the spines, ticks, ticklables,</span>
<span class="sd">        or other labels.  For a bounding box including these elements use</span>
<span class="sd">        `~matplotlib.axes.Axes.get_tightbbox`.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.get_tightbbox</span>
<span class="sd">        matplotlib.axis.Axis.get_tightbbox</span>
<span class="sd">        matplotlib.spines.get_window_extent</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span>

    <span class="k">def</span> <span class="nf">_init_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This is moved out of __init__ because non-separable axes don&#39;t use it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="o">=</span> <span class="n">maxis</span><span class="o">.</span><span class="n">XAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="o">=</span> <span class="n">maxis</span><span class="o">.</span><span class="n">YAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedBbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="p">,</span>
                                                <span class="n">fig</span><span class="o">.</span><span class="n">transFigure</span><span class="p">)</span>
        <span class="c1"># these will be updated later as data is added</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">null</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformWrapper</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_lim_and_transforms</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_unstale_viewLim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># We should arrange to store this information once per share-group</span>
        <span class="c1"># instead of on every axis.</span>
        <span class="n">scalex</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">_stale_viewlim_x</span>
                     <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="n">scaley</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">_stale_viewlim_y</span>
                     <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">scalex</span> <span class="ow">or</span> <span class="n">scaley</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">_stale_viewlim_x</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">_stale_viewlim_y</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">scalex</span><span class="o">=</span><span class="n">scalex</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">scaley</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">viewLim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unstale_viewLim</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span>

    <span class="c1"># API could be better, right now this is just to match the old calls to</span>
    <span class="c1"># autoscale_view() after each plotting method.</span>
    <span class="k">def</span> <span class="nf">_request_autoscale_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="n">tight</span>
        <span class="k">if</span> <span class="n">scalex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_stale_viewlim_x</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Else keep old state.</span>
        <span class="k">if</span> <span class="n">scaley</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_stale_viewlim_y</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_set_lim_and_transforms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the *_xaxis_transform*, *_yaxis_transform*, *transScale*,</span>
<span class="sd">        *transData*, *transLimits* and *transAxes* transformations.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This method is primarily used by rectilinear projections of the</span>
<span class="sd">            `~matplotlib.axes.Axes` class, and is meant to be overridden by</span>
<span class="sd">            new kinds of projection axes that need different transformations</span>
<span class="sd">            and limits. (See `~matplotlib.projections.polar.PolarAxes` for an</span>
<span class="sd">            example.)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

        <span class="c1"># Transforms the x and y axis separately by a scale factor.</span>
        <span class="c1"># It is assumed that this part will have non-linear components</span>
        <span class="c1"># (e.g., for a log scale).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformWrapper</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span>

        <span class="c1"># An affine transformation on the data, generally to limit the</span>
        <span class="c1"># range of the axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transLimits</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformFrom</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedBbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span><span class="p">))</span>

        <span class="c1"># The parentheses are important for efficiency here -- they</span>
        <span class="c1"># group the last two (which are usually affines) separately</span>
        <span class="c1"># from the first (which, with log-scaling can be non-affine).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transData</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transLimits</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transformation used for drawing x-axis labels, ticks</span>
<span class="sd">        and gridlines.  The x-direction is in data coordinates and the</span>
<span class="sd">        y-direction is in axis coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            `~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;grid&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick1&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is bottom spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick2&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is top spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown value for which&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_text1_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        transform : Transform</span>
<span class="sd">            The transform used for drawing x-axis labels, which will add</span>
<span class="sd">            *pad_points* of padding (in points) between the axes and the label.</span>
<span class="sd">            The x-direction is in data coordinates and the y-direction is in</span>
<span class="sd">            axis corrdinates</span>
<span class="sd">        valign : {&#39;center&#39;, &#39;top&#39;, &#39;bottom&#39;, &#39;baseline&#39;, &#39;center_baseline&#39;}</span>
<span class="sd">            The text vertical alignment.</span>
<span class="sd">        halign : {&#39;center&#39;, &#39;left&#39;, &#39;right&#39;}</span>
<span class="sd">            The text horizontal alignment.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This transformation is primarily used by the `~matplotlib.axis.Axis`</span>
<span class="sd">        class, and is meant to be overridden by new kinds of projections that</span>
<span class="sd">        may need to place axis elements in different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;xtick.alignment&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick1&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">labels_align</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_text2_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        transform : Transform</span>
<span class="sd">            The transform used for drawing secondary x-axis labels, which will</span>
<span class="sd">            add *pad_points* of padding (in points) between the axes and the</span>
<span class="sd">            label.  The x-direction is in data coordinates and the y-direction</span>
<span class="sd">            is in axis corrdinates</span>
<span class="sd">        valign : {&#39;center&#39;, &#39;top&#39;, &#39;bottom&#39;, &#39;baseline&#39;, &#39;center_baseline&#39;}</span>
<span class="sd">            The text vertical alignment.</span>
<span class="sd">        halign : {&#39;center&#39;, &#39;left&#39;, &#39;right&#39;}</span>
<span class="sd">            The text horizontal alignment.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This transformation is primarily used by the `~matplotlib.axis.Axis`</span>
<span class="sd">        class, and is meant to be overridden by new kinds of projections that</span>
<span class="sd">        may need to place axis elements in different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;xtick.alignment&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick2&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="s2">&quot;bottom&quot;</span><span class="p">,</span> <span class="n">labels_align</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transformation used for drawing y-axis labels, ticks</span>
<span class="sd">        and gridlines.  The x-direction is in axis coordinates and the</span>
<span class="sd">        y-direction is in data coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            `~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;grid&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick1&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is bottom spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick2&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is top spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown value for which&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_text1_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        transform : Transform</span>
<span class="sd">            The transform used for drawing y-axis labels, which will add</span>
<span class="sd">            *pad_points* of padding (in points) between the axes and the label.</span>
<span class="sd">            The x-direction is in axis coordinates and the y-direction is in</span>
<span class="sd">            data corrdinates</span>
<span class="sd">        valign : {&#39;center&#39;, &#39;top&#39;, &#39;bottom&#39;, &#39;baseline&#39;, &#39;center_baseline&#39;}</span>
<span class="sd">            The text vertical alignment.</span>
<span class="sd">        halign : {&#39;center&#39;, &#39;left&#39;, &#39;right&#39;}</span>
<span class="sd">            The text horizontal alignment.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This transformation is primarily used by the `~matplotlib.axis.Axis`</span>
<span class="sd">        class, and is meant to be overridden by new kinds of projections that</span>
<span class="sd">        may need to place axis elements in different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;ytick.alignment&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick1&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="n">labels_align</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_text2_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        transform : Transform</span>
<span class="sd">            The transform used for drawing secondart y-axis labels, which will</span>
<span class="sd">            add *pad_points* of padding (in points) between the axes and the</span>
<span class="sd">            label.  The x-direction is in axis coordinates and the y-direction</span>
<span class="sd">            is in data corrdinates</span>
<span class="sd">        valign : {&#39;center&#39;, &#39;top&#39;, &#39;bottom&#39;, &#39;baseline&#39;, &#39;center_baseline&#39;}</span>
<span class="sd">            The text vertical alignment.</span>
<span class="sd">        halign : {&#39;center&#39;, &#39;left&#39;, &#39;right&#39;}</span>
<span class="sd">            The text horizontal alignment.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This transformation is primarily used by the `~matplotlib.axis.Axis`</span>
<span class="sd">        class, and is meant to be overridden by new kinds of projections that</span>
<span class="sd">        may need to place axis elements in different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;ytick.alignment&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick2&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="n">pad_points</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="n">labels_align</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_transScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()))</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lines&quot;</span><span class="p">,</span> <span class="p">[]):</span>  <span class="c1"># Not set during init.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">line</span><span class="o">.</span><span class="n">_transformed_path</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a copy of the axes rectangle as a `.Bbox`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        original : bool</span>
<span class="sd">            If ``True``, return the original position. Otherwise return the</span>
<span class="sd">            active position. For an explanation of the positions see</span>
<span class="sd">            `.set_position`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        `.Bbox`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">original</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_originalPosition</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">locator</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the axes position.</span>

<span class="sd">        Axes have two position attributes. The &#39;original&#39; position is the</span>
<span class="sd">        position allocated for the Axes. The &#39;active&#39; position is the</span>
<span class="sd">        position the Axes is actually drawn at. These positions are usually</span>
<span class="sd">        the same unless a fixed aspect is set to the Axes. See `.set_aspect`</span>
<span class="sd">        for details.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pos : [left, bottom, width, height] or `~matplotlib.transforms.Bbox`</span>
<span class="sd">            The new position of the in `.Figure` coordinates.</span>

<span class="sd">        which : {&#39;both&#39;, &#39;active&#39;, &#39;original&#39;}, default: &#39;both&#39;</span>
<span class="sd">            Determines which position variables to change.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">)</span>
        <span class="c1"># because this is being called externally to the library we</span>
        <span class="c1"># zero the constrained layout parts.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layoutbox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_poslayoutbox</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Private version of set_position.</span>

<span class="sd">        Call this internally to get the same functionality of `get_position`,</span>
<span class="sd">        but not to take the axis out of the constrained_layout hierarchy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxBase</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="s1">&#39;original&#39;</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">_originalPosition</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">reset_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the active position to the original position.</span>

<span class="sd">        This resets the a possible position change due to aspect constraints.</span>
<span class="sd">        For an explanation of the positions see `.set_position`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="n">original</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_axes_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the axes locator.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        locator : Callable[[Axes, Renderer], Bbox]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axes_locator</span> <span class="o">=</span> <span class="n">locator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_axes_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the axes_locator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axes_locator</span>

    <span class="k">def</span> <span class="nf">_set_artist_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the boilerplate props for artists added to axes.&quot;&quot;&quot;</span>
        <span class="n">a</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">is_transform_set</span><span class="p">():</span>
            <span class="n">a</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

        <span class="n">a</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">mouseover</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mouseover_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gen_axes_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Patch</span>
<span class="sd">            The patch used to draw the background of the axes.  It is also used</span>
<span class="sd">            as the clipping path for any data elements on the axes.</span>

<span class="sd">            In the standard axes, this is a rectangle, but in other projections</span>
<span class="sd">            it may not be.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gen_axes_spines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;inches&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            Mapping of spine names to `.Line2D` or `.Patch` instances that are</span>
<span class="sd">            used to draw axes spines.</span>

<span class="sd">            In the standard axes, spines are single line segments, but in other</span>
<span class="sd">            projections they may not be.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">OrderedDict</span><span class="p">((</span><span class="n">side</span><span class="p">,</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="p">))</span>
                           <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">sharex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Share the x-axis with *other*.</span>

<span class="sd">        This is equivalent to passing ``sharex=other`` when constructing the</span>
<span class="sd">        axes, and cannot be used if the x-axis is already being shared with</span>
<span class="sd">        another axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cbook</span><span class="o">.</span><span class="n">_check_isinstance</span><span class="p">(</span><span class="n">_AxesBase</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;x-axis is already shared&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="o">=</span> <span class="n">other</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span>  <span class="c1"># Ticker instances holding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">minor</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">minor</span>  <span class="c1"># locator and formatter.</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">other</span><span class="o">.</span><span class="n">get_autoscalex_on</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_scale</span>

    <span class="k">def</span> <span class="nf">sharey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Share the y-axis with *other*.</span>

<span class="sd">        This is equivalent to passing ``sharey=other`` when constructing the</span>
<span class="sd">        axes, and cannot be used if the y-axis is already being shared with</span>
<span class="sd">        another axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cbook</span><span class="o">.</span><span class="n">_check_isinstance</span><span class="p">(</span><span class="n">_AxesBase</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;y-axis is already shared&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="o">=</span> <span class="n">other</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span>  <span class="c1"># Ticker instances holding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minor</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minor</span>  <span class="c1"># locator and formatter.</span>
        <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">other</span><span class="o">.</span><span class="n">get_autoscaley_on</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_scale</span>

    <span class="k">def</span> <span class="nf">cla</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear the current axes.&quot;&quot;&quot;</span>
        <span class="c1"># Note: this is called by Axes.__init__()</span>

        <span class="c1"># stash the current visibility state</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">):</span>
            <span class="n">patch_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">patch_visible</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">xaxis_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>
        <span class="n">yaxis_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">spine</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">spine</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">CallbackRegistry</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sharex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sharey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="c1"># update the minor locator for x and y axis based on rcParams</span>
        <span class="k">if</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.visible&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.visible&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.xmargin&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.ymargin&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_use_sticky_edges</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>  <span class="c1"># needed?</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_get_lines</span> <span class="o">=</span> <span class="n">_process_plot_var_args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_patches_for_fill</span> <span class="o">=</span> <span class="n">_process_plot_var_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;fill&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_gridOn</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mouseover_set</span> <span class="o">=</span> <span class="n">_OrderedSet</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># strictly for pyplot via _sci, _gci</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collections</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># collection.Collection instances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containers</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Disable grid on init to use rcParameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gridOn</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid.which&#39;</span><span class="p">],</span>
                  <span class="n">axis</span><span class="o">=</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid.axis&#39;</span><span class="p">])</span>
        <span class="n">props</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">(</span>
            <span class="n">size</span><span class="o">=</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titlesize&#39;</span><span class="p">],</span>
            <span class="n">weight</span><span class="o">=</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titleweight&#39;</span><span class="p">])</span>

        <span class="n">y</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titley&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autotitlepos</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autotitlepos</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">title_offset_points</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titlepad&#39;</span><span class="p">]</span>
        <span class="c1"># refactor this out so it can be called in ax.set_title if</span>
        <span class="c1"># pad argument used...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_title_offset_trans</span><span class="p">(</span><span class="n">title_offset_points</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">_title</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">_title</span><span class="p">)</span>

        <span class="c1"># The patch draws the background of the axes.  We want this to be below</span>
        <span class="c1"># the other artists.  We use the frame to draw the edges so we are</span>
        <span class="c1"># setting the edgecolor to None.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_axes_patch</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_facecolor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_on</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">xaxis_visible</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">patch_visible</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">yaxis_visible</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">patch_visible</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear the axes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the facecolor of the Axes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">get_facecolor</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the facecolor of the Axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        color : color</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_facecolor</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_title_offset_trans</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title_offset_points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the offset for the title either from :rc:`axes.titlepad`</span>
<span class="sd">        or from set_title kwarg ``pad``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titleOffsetTrans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span>
                <span class="mf">0.0</span><span class="p">,</span> <span class="n">title_offset_points</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_title</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">):</span>
            <span class="n">_title</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">titleOffsetTrans</span><span class="p">)</span>
            <span class="n">_title</span><span class="o">.</span><span class="n">set_clip_box</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_prop_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the property cycle of the Axes.</span>

<span class="sd">        The property cycle controls the style properties such as color,</span>
<span class="sd">        marker and linestyle of future plot commands. The style properties</span>
<span class="sd">        of data already added to the Axes are not modified.</span>

<span class="sd">        Call signatures::</span>

<span class="sd">          set_prop_cycle(cycler)</span>
<span class="sd">          set_prop_cycle(label=values[, label2=values2[, ...]])</span>
<span class="sd">          set_prop_cycle(label, values)</span>

<span class="sd">        Form 1 sets given `~cycler.Cycler` object.</span>

<span class="sd">        Form 2 creates a `~cycler.Cycler` which cycles over one or more</span>
<span class="sd">        properties simultaneously and set it as the property cycle of the</span>
<span class="sd">        axes. If multiple properties are given, their value lists must have</span>
<span class="sd">        the same length. This is just a shortcut for explicitly creating a</span>
<span class="sd">        cycler and passing it to the function, i.e. it&#39;s short for</span>
<span class="sd">        ``set_prop_cycle(cycler(label=values label2=values2, ...))``.</span>

<span class="sd">        Form 3 creates a `~cycler.Cycler` for a single property and set it</span>
<span class="sd">        as the property cycle of the axes. This form exists for compatibility</span>
<span class="sd">        with the original `cycler.cycler` interface. Its use is discouraged</span>
<span class="sd">        in favor of the kwarg form, i.e. ``set_prop_cycle(label=values)``.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cycler : Cycler</span>
<span class="sd">            Set the given Cycler. *None* resets to the cycle defined by the</span>
<span class="sd">            current style.</span>

<span class="sd">        label : str</span>
<span class="sd">            The property key. Must be a valid `.Artist` property.</span>
<span class="sd">            For example, &#39;color&#39; or &#39;linestyle&#39;. Aliases are allowed,</span>
<span class="sd">            such as &#39;c&#39; for &#39;color&#39; and &#39;lw&#39; for &#39;linewidth&#39;.</span>

<span class="sd">        values : iterable</span>
<span class="sd">            Finite-length iterable of the property values. These values</span>
<span class="sd">            are validated and will raise a ValueError if invalid.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.rcsetup.cycler</span>
<span class="sd">            Convenience function for creating validated cyclers for properties.</span>
<span class="sd">        cycler.cycler</span>
<span class="sd">            The original function for creating unvalidated cyclers.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Setting the property cycle for a single property:</span>

<span class="sd">        &gt;&gt;&gt; ax.set_prop_cycle(color=[&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;])</span>

<span class="sd">        Setting the property cycle for simultaneously cycling over multiple</span>
<span class="sd">        properties (e.g. red circle, green plus, blue cross):</span>

<span class="sd">        &gt;&gt;&gt; ax.set_prop_cycle(color=[&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;],</span>
<span class="sd">        ...                   marker=[&#39;o&#39;, &#39;+&#39;, &#39;x&#39;])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot supply both positional and keyword &quot;</span>
                            <span class="s2">&quot;arguments to this method.&quot;</span><span class="p">)</span>
        <span class="c1"># Can&#39;t do `args == (None,)` as that crashes cycler.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop_cycle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prop_cycle</span> <span class="o">=</span> <span class="n">cycler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_lines</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="n">prop_cycle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_patches_for_fill</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="n">prop_cycle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aspect</span>

    <span class="k">def</span> <span class="nf">set_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the aspect of the axis scaling, i.e. the ratio of y-unit to x-unit.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        aspect : {&#39;auto&#39;} or num</span>
<span class="sd">            Possible values:</span>

<span class="sd">            ========   =================================================</span>
<span class="sd">            value      description</span>
<span class="sd">            ========   =================================================</span>
<span class="sd">            &#39;auto&#39;     automatic; fill the position rectangle with data.</span>
<span class="sd">            num        a circle will be stretched such that the height</span>
<span class="sd">                       is *num* times the width.  &#39;equal&#39; is a synonym</span>
<span class="sd">                       for ``aspect=1``, i.e. same scaling for x and y.</span>
<span class="sd">            ========   =================================================</span>

<span class="sd">        adjustable : None or {&#39;box&#39;, &#39;datalim&#39;}, optional</span>
<span class="sd">            If not ``None``, this defines which parameter will be adjusted to</span>
<span class="sd">            meet the required aspect. See `.set_adjustable` for further</span>
<span class="sd">            details.</span>

<span class="sd">        anchor : None or str or 2-tuple of float, optional</span>
<span class="sd">            If not ``None``, this defines where the Axes will be drawn if there</span>
<span class="sd">            is extra space due to aspect constraints. The most common way to</span>
<span class="sd">            to specify the anchor are abbreviations of cardinal directions:</span>

<span class="sd">            =====   =====================</span>
<span class="sd">            value   description</span>
<span class="sd">            =====   =====================</span>
<span class="sd">            &#39;C&#39;     centered</span>
<span class="sd">            &#39;SW&#39;    lower left corner</span>
<span class="sd">            &#39;S&#39;     middle of bottom edge</span>
<span class="sd">            &#39;SE&#39;    lower right corner</span>
<span class="sd">            etc.</span>
<span class="sd">            =====   =====================</span>

<span class="sd">            See `.set_anchor` for further details.</span>

<span class="sd">        share : bool, default: False</span>
<span class="sd">            If ``True``, apply the settings to all shared Axes.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_adjustable</span>
<span class="sd">            Set how the Axes adjusts to achieve the required aspect ratio.</span>
<span class="sd">        matplotlib.axes.Axes.set_anchor</span>
<span class="sd">            Set the position in case of extra space.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cbook</span><span class="o">.</span><span class="n">_str_equal</span><span class="p">(</span><span class="n">aspect</span><span class="p">,</span> <span class="s1">&#39;equal&#39;</span><span class="p">):</span>
            <span class="n">aspect</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">cbook</span><span class="o">.</span><span class="n">_str_equal</span><span class="p">(</span><span class="n">aspect</span><span class="p">,</span> <span class="s1">&#39;auto&#39;</span><span class="p">):</span>
            <span class="n">aspect</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">aspect</span><span class="p">)</span>  <span class="c1"># raise ValueError if necessary</span>

        <span class="k">if</span> <span class="n">share</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">{</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                    <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_aspect</span> <span class="o">=</span> <span class="n">aspect</span>

        <span class="k">if</span> <span class="n">adjustable</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">adjustable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="n">adjustable</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="n">share</span><span class="p">)</span>  <span class="c1"># Handle sharing.</span>

        <span class="k">if</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_anchor</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="n">share</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_adjustable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether the Axes will adjust its physical dimension (&#39;box&#39;) or</span>
<span class="sd">        its data limits (&#39;datalim&#39;) to achieve the desired aspect ratio.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_adjustable</span>
<span class="sd">            Set how the Axes adjusts to achieve the required aspect ratio.</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            For a description of aspect handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span>

    <span class="k">def</span> <span class="nf">set_adjustable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adjustable</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set how the Axes adjusts to achieve the required aspect ratio.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        adjustable : {&#39;box&#39;, &#39;datalim&#39;}</span>
<span class="sd">            If &#39;box&#39;, change the physical dimensions of the Axes.</span>
<span class="sd">            If &#39;datalim&#39;, change the ``x`` or ``y`` data limits.</span>

<span class="sd">        share : bool, default: False</span>
<span class="sd">            If ``True``, apply the settings to all shared Axes.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            For a description of aspect handling.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Shared Axes (of which twinned Axes are a special case)</span>
<span class="sd">        impose restrictions on how aspect ratios can be imposed.</span>
<span class="sd">        For twinned Axes, use &#39;datalim&#39;.  For Axes that share both</span>
<span class="sd">        x and y, use &#39;box&#39;.  Otherwise, either &#39;datalim&#39; or &#39;box&#39;</span>
<span class="sd">        may be used.  These limitations are partly a requirement</span>
<span class="sd">        to avoid over-specification, and partly a result of the</span>
<span class="sd">        particular implementation we are currently using, in</span>
<span class="sd">        which the adjustments for aspect ratios are done sequentially</span>
<span class="sd">        and independently on each Axes as it is drawn.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cbook</span><span class="o">.</span><span class="n">_check_in_list</span><span class="p">([</span><span class="s2">&quot;box&quot;</span><span class="p">,</span> <span class="s2">&quot;datalim&quot;</span><span class="p">],</span> <span class="n">adjustable</span><span class="o">=</span><span class="n">adjustable</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">share</span><span class="p">:</span>
            <span class="n">axs</span> <span class="o">=</span> <span class="p">{</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                   <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axs</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">adjustable</span> <span class="o">==</span> <span class="s2">&quot;datalim&quot;</span>
                <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_data_ratio</span><span class="p">,</span> <span class="s2">&quot;__func__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                        <span class="o">!=</span> <span class="n">_AxesBase</span><span class="o">.</span><span class="n">get_data_ratio</span>
                        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">)):</span>
            <span class="c1"># Limits adjustment by apply_aspect assumes that the axes&#39; aspect</span>
            <span class="c1"># ratio can be computed from the data limits and scales.</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot set axes adjustable to &#39;datalim&#39; for &quot;</span>
                             <span class="s2">&quot;Axes which override &#39;get_data_ratio&#39;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="n">adjustable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_box_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the axes box aspect.</span>
<span class="sd">        Will be ``None`` if not explicitly specified.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_box_aspect</span>
<span class="sd">            for a description of box aspect.</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_aspect</span>

    <span class="k">def</span> <span class="nf">set_box_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the axes box aspect. The box aspect is the ratio of the</span>
<span class="sd">        axes height to the axes width in physical units. This is not to be</span>
<span class="sd">        confused with the data aspect, set via `~.Axes.set_aspect`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        aspect : None, or a number</span>
<span class="sd">            Changes the physical dimensions of the Axes, such that the ratio</span>
<span class="sd">            of the axes height to the axes width in physical units is equal to</span>
<span class="sd">            *aspect*. If *None*, the axes geometry will not be adjusted.</span>

<span class="sd">        Note that calling this function with a number changes the *adjustable*</span>
<span class="sd">        to *datalim*.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axs</span> <span class="o">=</span> <span class="p">{</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
               <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)}</span>

        <span class="k">if</span> <span class="n">aspect</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">aspect</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">aspect</span><span class="p">)</span>
            <span class="c1"># when box_aspect is set to other than None`,</span>
            <span class="c1"># adjustable must be &quot;datalim&quot;</span>
            <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="s2">&quot;datalim&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_box_aspect</span> <span class="o">=</span> <span class="n">aspect</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the anchor location.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_anchor</span>
<span class="sd">            for a description of the anchor.</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anchor</span>

    <span class="k">def</span> <span class="nf">set_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Define the anchor location.</span>

<span class="sd">        The actual drawing area (active position) of the Axes may be smaller</span>
<span class="sd">        than the Bbox (original position) when a fixed aspect is required. The</span>
<span class="sd">        anchor defines where the drawing area will be located within the</span>
<span class="sd">        available space.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        anchor : 2-tuple of floats or {&#39;C&#39;, &#39;SW&#39;, &#39;S&#39;, &#39;SE&#39;, ...}</span>
<span class="sd">            The anchor position may be either:</span>

<span class="sd">            - a sequence (*cx*, *cy*). *cx* and *cy* may range from 0</span>
<span class="sd">              to 1, where 0 is left or bottom and 1 is right or top.</span>

<span class="sd">            - a string using cardinal directions as abbreviation:</span>

<span class="sd">              - &#39;C&#39; for centered</span>
<span class="sd">              - &#39;S&#39; (south) for bottom-center</span>
<span class="sd">              - &#39;SW&#39; (south west) for bottom-left</span>
<span class="sd">              - etc.</span>

<span class="sd">              Here is an overview of the possible positions:</span>

<span class="sd">              +------+------+------+</span>
<span class="sd">              | &#39;NW&#39; | &#39;N&#39;  | &#39;NE&#39; |</span>
<span class="sd">              +------+------+------+</span>
<span class="sd">              | &#39;W&#39;  | &#39;C&#39;  | &#39;E&#39;  |</span>
<span class="sd">              +------+------+------+</span>
<span class="sd">              | &#39;SW&#39; | &#39;S&#39;  | &#39;SE&#39; |</span>
<span class="sd">              +------+------+------+</span>

<span class="sd">        share : bool, default: False</span>
<span class="sd">            If ``True``, apply the settings to all shared Axes.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">anchor</span> <span class="ow">in</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">coefs</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">anchor</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;argument must be among </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                             <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">coefs</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">share</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">{</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                    <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_anchor</span> <span class="o">=</span> <span class="n">anchor</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_data_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the aspect ratio of the scaled data.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This method is intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">txmin</span><span class="p">,</span> <span class="n">txmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">())</span>
        <span class="n">tymin</span><span class="p">,</span> <span class="n">tymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">())</span>
        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">txmax</span> <span class="o">-</span> <span class="n">txmin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">tymax</span> <span class="o">-</span> <span class="n">tymin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">xsize</span>

    <span class="nd">@cbook</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">&quot;3.2&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_data_ratio_log</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the aspect ratio of the raw data in log scale.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Will be used when both axis are in log scale.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>

        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmin</span><span class="p">)),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ymin</span><span class="p">)),</span> <span class="mf">1e-30</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">xsize</span>

    <span class="k">def</span> <span class="nf">apply_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adjust the Axes for a specified data aspect ratio.</span>

<span class="sd">        Depending on `.get_adjustable` this will modify either the</span>
<span class="sd">        Axes box (position) or the view limits. In the former case,</span>
<span class="sd">        `~matplotlib.axes.Axes.get_anchor` will affect the position.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This is called automatically when each Axes is drawn.  You may need</span>
<span class="sd">        to call it yourself if you need to update the Axes position and/or</span>
<span class="sd">        view limits before the Figure is drawn.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            For a description of aspect ratio handling.</span>
<span class="sd">        matplotlib.axes.Axes.set_adjustable</span>
<span class="sd">            Set how the Axes adjusts to achieve the required aspect ratio.</span>
<span class="sd">        matplotlib.axes.Axes.set_anchor</span>
<span class="sd">            Set the position in case of extra space.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="n">original</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">aspect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_aspect</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">aspect</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_aspect</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">fig_width</span><span class="p">,</span> <span class="n">fig_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">get_size_inches</span><span class="p">()</span>
        <span class="n">fig_aspect</span> <span class="o">=</span> <span class="n">fig_height</span> <span class="o">/</span> <span class="n">fig_width</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">==</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Adjustable &#39;box&#39; is not allowed in a &quot;</span>
                                   <span class="s2">&quot;twinned Axes; use &#39;datalim&#39; instead&quot;</span><span class="p">)</span>
            <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">aspect</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_ratio</span><span class="p">()</span>
            <span class="n">pb</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
            <span class="n">pb1</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">shrunk_to_aspect</span><span class="p">(</span><span class="n">box_aspect</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">fig_aspect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">pb1</span><span class="o">.</span><span class="n">anchored</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_anchor</span><span class="p">(),</span> <span class="n">pb</span><span class="p">),</span> <span class="s1">&#39;active&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># The following is only seen if self._adjustable == &#39;datalim&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_aspect</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pb</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
            <span class="n">pb1</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">shrunk_to_aspect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_box_aspect</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">fig_aspect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">pb1</span><span class="o">.</span><span class="n">anchored</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_anchor</span><span class="p">(),</span> <span class="n">pb</span><span class="p">),</span> <span class="s1">&#39;active&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">aspect</span> <span class="o">==</span> <span class="s2">&quot;auto&quot;</span><span class="p">:</span>
                <span class="k">return</span>

        <span class="c1"># reset active to original in case it had been changed by prior use</span>
        <span class="c1"># of &#39;box&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_aspect</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="n">pb1</span><span class="o">.</span><span class="n">anchored</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_anchor</span><span class="p">(),</span> <span class="n">pb</span><span class="p">)</span>

        <span class="n">x_trf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
        <span class="n">y_trf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">x_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">())</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">y_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">())</span>
        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>

        <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">fig_aspect</span> <span class="o">*</span> <span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="n">position</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
        <span class="n">data_ratio</span> <span class="o">=</span> <span class="n">box_aspect</span> <span class="o">/</span> <span class="n">aspect</span>

        <span class="n">y_expander</span> <span class="o">=</span> <span class="n">data_ratio</span> <span class="o">*</span> <span class="n">xsize</span> <span class="o">/</span> <span class="n">ysize</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="c1"># If y_expander &gt; 0, the dy/dx viewLim ratio needs to increase</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y_expander</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.005</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">dL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">intervalx</span><span class="p">)</span>
        <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">intervaly</span><span class="p">)</span>
        <span class="n">xr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span>
        <span class="n">yr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span>

        <span class="n">xmarg</span> <span class="o">=</span> <span class="n">xsize</span> <span class="o">-</span> <span class="n">xr</span>
        <span class="n">ymarg</span> <span class="o">=</span> <span class="n">ysize</span> <span class="o">-</span> <span class="n">yr</span>
        <span class="n">Ysize</span> <span class="o">=</span> <span class="n">data_ratio</span> <span class="o">*</span> <span class="n">xsize</span>
        <span class="n">Xsize</span> <span class="o">=</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">data_ratio</span>
        <span class="n">Xmarg</span> <span class="o">=</span> <span class="n">Xsize</span> <span class="o">-</span> <span class="n">xr</span>
        <span class="n">Ymarg</span> <span class="o">=</span> <span class="n">Ysize</span> <span class="o">-</span> <span class="n">yr</span>
        <span class="c1"># Setting these targets to, e.g., 0.05*xr does not seem to help.</span>
        <span class="n">xm</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ym</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">shared_x</span> <span class="o">=</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span>
        <span class="n">shared_y</span> <span class="o">=</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span>
        <span class="c1"># Not sure whether we need this check:</span>
        <span class="k">if</span> <span class="n">shared_x</span> <span class="ow">and</span> <span class="n">shared_y</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;adjustable=&#39;datalim&#39; is not allowed when both &quot;</span>
                               <span class="s2">&quot;axes are shared&quot;</span><span class="p">)</span>

        <span class="c1"># If y is shared, then we are only allowed to change x, etc.</span>
        <span class="k">if</span> <span class="n">shared_y</span><span class="p">:</span>
            <span class="n">adjust_y</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">xmarg</span> <span class="o">&gt;</span> <span class="n">xm</span> <span class="ow">and</span> <span class="n">ymarg</span> <span class="o">&gt;</span> <span class="n">ym</span><span class="p">:</span>
                <span class="n">adjy</span> <span class="o">=</span> <span class="p">((</span><span class="n">Ymarg</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y_expander</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="p">(</span><span class="n">Xmarg</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y_expander</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">adjy</span> <span class="o">=</span> <span class="n">y_expander</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="n">adjust_y</span> <span class="o">=</span> <span class="n">shared_x</span> <span class="ow">or</span> <span class="n">adjy</span>  <span class="c1"># (Ymarg &gt; xmarg)</span>

        <span class="k">if</span> <span class="n">adjust_y</span><span class="p">:</span>
            <span class="n">yc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span><span class="p">)</span>
            <span class="n">y0</span> <span class="o">=</span> <span class="n">yc</span> <span class="o">-</span> <span class="n">Ysize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">yc</span> <span class="o">+</span> <span class="n">Ysize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">(</span><span class="n">y_trf</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span><span class="p">)</span>
            <span class="n">x0</span> <span class="o">=</span> <span class="n">xc</span> <span class="o">-</span> <span class="n">Xsize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">xc</span> <span class="o">+</span> <span class="n">Xsize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">(</span><span class="n">x_trf</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience method to get or set some axis properties.</span>

<span class="sd">        Call signatures::</span>

<span class="sd">          xmin, xmax, ymin, ymax = axis()</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis([xmin, xmax, ymin, ymax])</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis(option)</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis(**kwargs)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xmin, xmax, ymin, ymax : float, optional</span>
<span class="sd">            The axis limits to be set.  This can also be achieved using ::</span>

<span class="sd">                ax.set(xlim=(xmin, xmax), ylim=(ymin, ymax))</span>

<span class="sd">        option : bool or str</span>
<span class="sd">            If a bool, turns axis lines and labels on or off. If a string,</span>
<span class="sd">            possible values are:</span>

<span class="sd">            ======== ==========================================================</span>
<span class="sd">            Value    Description</span>
<span class="sd">            ======== ==========================================================</span>
<span class="sd">            &#39;on&#39;     Turn on axis lines and labels. Same as ``True``.</span>
<span class="sd">            &#39;off&#39;    Turn off axis lines and labels. Same as ``False``.</span>
<span class="sd">            &#39;equal&#39;  Set equal scaling (i.e., make circles circular) by</span>
<span class="sd">                     changing axis limits. This is the same as</span>
<span class="sd">                     ``ax.set_aspect(&#39;equal&#39;, adjustable=&#39;datalim&#39;)``.</span>
<span class="sd">                     Explicit data limits may not be respected in this case.</span>
<span class="sd">            &#39;scaled&#39; Set equal scaling (i.e., make circles circular) by</span>
<span class="sd">                     changing dimensions of the plot box. This is the same as</span>
<span class="sd">                     ``ax.set_aspect(&#39;equal&#39;, adjustable=&#39;box&#39;, anchor=&#39;C&#39;)``.</span>
<span class="sd">                     Additionally, further autoscaling will be disabled.</span>
<span class="sd">            &#39;tight&#39;  Set limits just large enough to show all data, then</span>
<span class="sd">                     disable further autoscaling.</span>
<span class="sd">            &#39;auto&#39;   Automatic scaling (fill plot box with data).</span>
<span class="sd">            &#39;image&#39;  &#39;scaled&#39; with axis limits equal to data limits.</span>
<span class="sd">            &#39;square&#39; Square plot; similar to &#39;scaled&#39;, but initially forcing</span>
<span class="sd">                     ``xmax-xmin == ymax-ymin``.</span>
<span class="sd">            ======== ==========================================================</span>

<span class="sd">        emit : bool, default: True</span>
<span class="sd">            Whether observers are notified of the axis limit change.</span>
<span class="sd">            This option is passed on to `~.Axes.set_xlim` and</span>
<span class="sd">            `~.Axes.set_ylim`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xmin, xmax, ymin, ymax : float</span>
<span class="sd">            The axis limits.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_xlim</span>
<span class="sd">        matplotlib.axes.Axes.set_ylim</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;on&#39;</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;off&#39;</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;on&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_on</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;off&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="s1">&#39;scaled&#39;</span><span class="p">,</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;square&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="c1"># self.apply_aspect()</span>
                <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;equal&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;datalim&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;scaled&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Req. by Mark Bakker</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;tight&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;image&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;square&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">xlim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
                    <span class="n">ylim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
                    <span class="n">edge_size</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xlim</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ylim</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">edge_size</span><span class="p">],</span>
                                  <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">edge_size</span><span class="p">],</span>
                                  <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Unrecognized string </span><span class="si">%s</span><span class="s1"> to axis; &#39;</span>
                                 <span class="s1">&#39;try on or off&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">cbook</span><span class="o">.</span><span class="n">warn_deprecated</span><span class="p">(</span>
                        <span class="s2">&quot;3.2&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Passing more than one positional &quot;</span>
                        <span class="s2">&quot;argument to axis() is deprecated and will raise a &quot;</span>
                        <span class="s2">&quot;TypeError </span><span class="si">%(removal)s</span><span class="s2">.&quot;</span><span class="p">)</span>
                <span class="n">limits</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">limits</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;the first argument to axis() must be an &#39;</span>
                                    <span class="s1">&#39;interable of the form &#39;</span>
                                    <span class="s1">&#39;[xmin, xmax, ymin, ymax]&#39;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">xmin</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;xmin&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">xmax</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;xmax&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">ymin</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;ymin&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">ymax</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;ymax&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xauto</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span>  <span class="c1"># Keep autoscale state as is.</span>
                     <span class="k">if</span> <span class="n">xmin</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">xmax</span> <span class="ow">is</span> <span class="kc">None</span>
                     <span class="k">else</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># Turn off autoscale.</span>
            <span class="n">yauto</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span>
                     <span class="k">if</span> <span class="n">ymin</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ymax</span> <span class="ow">is</span> <span class="kc">None</span>
                     <span class="k">else</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">xauto</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">yauto</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;axis() got an unexpected keyword argument &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">(),</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the `.Legend` instance, or None if no legend is defined.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span>

    <span class="k">def</span> <span class="nf">get_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Return a list of `.AxesImage`\s contained by the Axes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;AxesImage&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of lines contained by the Axes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Line2D&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the XAxis instance.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span>

    <span class="k">def</span> <span class="nf">get_yaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the YAxis instance.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span>

    <span class="n">get_xgridlines</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_gridlines&quot;</span><span class="p">)</span>
    <span class="n">get_xticklines</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklines&quot;</span><span class="p">)</span>
    <span class="n">get_ygridlines</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_gridlines&quot;</span><span class="p">)</span>
    <span class="n">get_yticklines</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklines&quot;</span><span class="p">)</span>

    <span class="c1"># Adding and tracking artists</span>

    <span class="k">def</span> <span class="nf">_sci</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">im</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the current image.</span>

<span class="sd">        This image will be the target of colormap functions like</span>
<span class="sd">        `~.pyplot.viridis`, and other functions such as `~.pyplot.clim`.  The</span>
<span class="sd">        current image is an attribute of the current axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">mpl</span><span class="o">.</span><span class="n">contour</span><span class="o">.</span><span class="n">ContourSet</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">im</span><span class="o">.</span><span class="n">collections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;ContourSet must be in current Axes&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">im</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span> <span class="ow">and</span> <span class="n">im</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Argument must be an image, collection, or &quot;</span>
                             <span class="s2">&quot;ContourSet in this Axes&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span> <span class="o">=</span> <span class="n">im</span>

    <span class="k">def</span> <span class="nf">_gci</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Helper for `~matplotlib.pyplot.gci`; do not use elsewhere.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span>

    <span class="k">def</span> <span class="nf">has_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *True* if any artists have been added to axes.</span>

<span class="sd">        This should not be used to determine whether the *dataLim*</span>
<span class="sd">        need to be updated, and may not actually be useful for</span>
<span class="sd">        anything.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">)</span> <span class="o">+</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span> <span class="o">+</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span> <span class="o">+</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">add_artist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an `~.Artist` to the axes, and return the artist.</span>

<span class="sd">        Use `add_artist` only for artists for which there is no dedicated</span>
<span class="sd">        &quot;add&quot; method; and if necessary, use a method such as `update_datalim`</span>
<span class="sd">        to manually update the dataLim if the artist is to be included in</span>
<span class="sd">        autoscaling.</span>

<span class="sd">        If no ``transform`` has been specified when creating the artist (e.g.</span>
<span class="sd">        ``artist.get_transform() == None``) then the transform is set to</span>
<span class="sd">        ``ax.transData``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">a</span>

    <span class="k">def</span> <span class="nf">add_child_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an `~.AxesBase` to the axes&#39; children; return the child axes.</span>

<span class="sd">        This is the lowlevel version.  See `.axes.Axes.inset_axes`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># normally axes have themselves as the axes, but these need to have</span>
        <span class="c1"># their parent...</span>
        <span class="c1"># Need to bypass the getter...</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">_axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">stale_callback</span> <span class="o">=</span> <span class="n">martist</span><span class="o">.</span><span class="n">_stale_axes_callback</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">ax</span>

    <span class="k">def</span> <span class="nf">add_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">autolim</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `~.Collection` to the axes&#39; collections; return the collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">label</span><span class="p">:</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;_collection</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
        <span class="n">collection</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">collection</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">autolim</span><span class="p">:</span>
            <span class="c1"># Make sure viewLim is not stale (mostly to match</span>
            <span class="c1"># pre-lazy-autoscale behavior, which is not really better).</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_unstale_viewLim</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">get_datalim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">collection</span>

    <span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an `~.AxesImage` to the axes&#39; images; return the image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
            <span class="n">image</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;_image</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="n">image</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="k">def</span> <span class="nf">_update_image_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get_extent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(((</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">),</span> <span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">add_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `.Line2D` to the axes&#39; lines; return the line.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_line_limits</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;_line</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">line</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">line</span>

    <span class="k">def</span> <span class="nf">_add_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `~.Text` to the axes&#39; texts; return the text.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">txt</span>

    <span class="k">def</span> <span class="nf">_update_line_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Figures out the data limit of the given line, updating self.dataLim.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">line_trans</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">line_trans</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">:</span>
            <span class="n">data_path</span> <span class="o">=</span> <span class="n">path</span>

        <span class="k">elif</span> <span class="nb">any</span><span class="p">(</span><span class="n">line_trans</span><span class="o">.</span><span class="n">contains_branch_seperately</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)):</span>
            <span class="c1"># identify the transform to go from line&#39;s coordinates</span>
            <span class="c1"># to data coordinates</span>
            <span class="n">trans_to_data</span> <span class="o">=</span> <span class="n">line_trans</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span>

            <span class="c1"># if transData is affine we can use the cached non-affine component</span>
            <span class="c1"># of line&#39;s path. (since the non-affine part of line_trans is</span>
            <span class="c1"># entirely encapsulated in trans_to_data).</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">is_affine</span><span class="p">:</span>
                <span class="n">line_trans_path</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">_get_transformed_path</span><span class="p">()</span>
                <span class="n">na_path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">line_trans_path</span><span class="o">.</span><span class="n">get_transformed_path_and_affine</span><span class="p">()</span>
                <span class="n">data_path</span> <span class="o">=</span> <span class="n">trans_to_data</span><span class="o">.</span><span class="n">transform_path_affine</span><span class="p">(</span><span class="n">na_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data_path</span> <span class="o">=</span> <span class="n">trans_to_data</span><span class="o">.</span><span class="n">transform_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># for backwards compatibility we update the dataLim with the</span>
            <span class="c1"># coordinate range of the given path, even though the coordinate</span>
            <span class="c1"># systems are completely different. This may occur in situations</span>
            <span class="c1"># such as when ax.transAxes is passed through for absolute</span>
            <span class="c1"># positioning.</span>
            <span class="n">data_path</span> <span class="o">=</span> <span class="n">path</span>

        <span class="k">if</span> <span class="n">data_path</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span> <span class="o">=</span> <span class="n">line_trans</span><span class="o">.</span><span class="n">contains_branch_seperately</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">update_from_path</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span><span class="p">,</span>
                                          <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span>
                                          <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `~.Patch` to the axes&#39; patches; return the patch.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_patch_limits</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">remove</span>
        <span class="k">return</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">_update_patch_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">patch</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the data limits for the given patch.&quot;&quot;&quot;</span>
        <span class="c1"># hist can add zero height Rectangles, which is useful to keep</span>
        <span class="c1"># the bins, counts and patches lined up, but it throws off log</span>
        <span class="c1"># scaling.  We&#39;ll ignore rects with zero height or width in</span>
        <span class="c1"># the auto-scaling</span>

        <span class="c1"># cannot check for &#39;==0&#39; since unitized data may not compare to zero</span>
        <span class="c1"># issue #2150 - we update the limits if patch has non zero width</span>
        <span class="c1"># or height.</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">patch</span><span class="p">,</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">)</span> <span class="ow">and</span>
                <span class="p">((</span><span class="ow">not</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_height</span><span class="p">()))):</span>
            <span class="k">return</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span><span class="o">.</span><span class="n">vertices</span>
        <span class="k">if</span> <span class="n">vertices</span><span class="o">.</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">xys</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_patch_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_data_transform</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">:</span>
                <span class="n">patch_to_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">patch</span><span class="o">.</span><span class="n">get_data_transform</span><span class="p">()</span> <span class="o">-</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
                <span class="n">xys</span> <span class="o">=</span> <span class="n">patch_to_data</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">xys</span><span class="p">)</span>

            <span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span>\
                <span class="n">contains_branch_seperately</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(</span><span class="n">xys</span><span class="p">,</span> <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span>
                                <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tab</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `~.Table` to the axes&#39; tables; return the table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">remove</span>
        <span class="k">return</span> <span class="n">tab</span>

    <span class="k">def</span> <span class="nf">add_container</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `~.Container` to the axes&#39; containers; return the container.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">label</span><span class="p">:</span>
            <span class="n">container</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;_container</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
        <span class="n">container</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">remove</span>
        <span class="k">return</span> <span class="n">container</span>

    <span class="k">def</span> <span class="nf">_on_units_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Callback for processing changes to axis units.</span>

<span class="sd">        Currently requests updates of data limits and view limits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relim</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="n">scalex</span><span class="o">=</span><span class="n">scalex</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">scaley</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">relim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visible_only</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Recompute the data limits based on current artists.</span>

<span class="sd">        At present, `~.Collection` instances are not supported.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        visible_only : bool, default: False</span>
<span class="sd">            Whether to exclude invisible artists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Collections are deliberately not supported (yet); see</span>
        <span class="c1"># the TODO note in artists.py.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">set_points</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">null</span><span class="p">()</span><span class="o">.</span><span class="n">get_points</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">visible_only</span> <span class="ow">or</span> <span class="n">line</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_line_limits</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">visible_only</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_patch_limits</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">visible_only</span> <span class="ow">or</span> <span class="n">image</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_image_limits</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_datalim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xys</span><span class="p">,</span> <span class="n">updatex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">updatey</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extend the `~.Axes.dataLim` Bbox to include the given points.</span>

<span class="sd">        If no data is set currently, the Bbox will ignore its limits and set</span>
<span class="sd">        the bound to be the bounds of the xydata (*xys*). Otherwise, it will</span>
<span class="sd">        compute the bounds of the union of its current data and the data in</span>
<span class="sd">        *xys*.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xys : 2D array-like</span>
<span class="sd">            The points to include in the data limits Bbox. This can be either</span>
<span class="sd">            a list of (x, y) tuples or a Nx2 array.</span>

<span class="sd">        updatex, updatey : bool, default: True</span>
<span class="sd">            Whether to update the x/y limits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">xys</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">xys</span><span class="p">)):</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">update_from_data_xy</span><span class="p">(</span><span class="n">xys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span><span class="p">,</span>
                                         <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@cbook</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span>
        <span class="s2">&quot;3.3&quot;</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s2">&quot;ax.dataLim.set(Bbox.union([ax.dataLim, bounds]))&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">update_datalim_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extend the `~.Axes.datalim` Bbox to include the given</span>
<span class="sd">        `~matplotlib.transforms.Bbox`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bounds : `~matplotlib.transforms.Bbox`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">union</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="p">,</span> <span class="n">bounds</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">_process_unit_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ydata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Look for unit *kwargs* and update the axis instances as necessary&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_process_single_axis</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">unit_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
            <span class="c1"># Return if there&#39;s no axis set</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">kwargs</span>

            <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># We only need to update if there is nothing set yet.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">axis</span><span class="o">.</span><span class="n">have_units</span><span class="p">():</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="c1"># Check for units in the kwargs, and if present update axis</span>
            <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">units</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">unit_name</span><span class="p">,</span> <span class="n">axis</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;polar&#39;</span><span class="p">:</span>
                    <span class="n">polar_units</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;xunits&#39;</span><span class="p">:</span> <span class="s1">&#39;thetaunits&#39;</span><span class="p">,</span> <span class="s1">&#39;yunits&#39;</span><span class="p">:</span> <span class="s1">&#39;runits&#39;</span><span class="p">}</span>
                    <span class="n">units</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">polar_units</span><span class="p">[</span><span class="n">unit_name</span><span class="p">],</span> <span class="n">units</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">units</span> <span class="o">!=</span> <span class="n">axis</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">units</span><span class="p">)</span>
                    <span class="c1"># If the units being set imply a different converter,</span>
                    <span class="c1"># we need to update.</span>
                    <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">axis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">kwargs</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">_process_single_axis</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="s1">&#39;xunits&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">_process_single_axis</span><span class="p">(</span><span class="n">ydata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">,</span> <span class="s1">&#39;yunits&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">kwargs</span>

    <span class="k">def</span> <span class="nf">in_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *True* if the given *mouseevent* (in display coords)</span>
<span class="sd">        is in the Axes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_autoscale_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether autoscaling is applied for both axes on plot commands</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span>

    <span class="k">def</span> <span class="nf">get_autoscalex_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether autoscaling for the x-axis is applied on plot commands</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span>

    <span class="k">def</span> <span class="nf">get_autoscaley_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether autoscaling for the y-axis is applied on plot commands</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span>

    <span class="k">def</span> <span class="nf">set_autoscale_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether autoscaling is applied on plot commands</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">set_autoscalex_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether autoscaling for the x-axis is applied on plot commands</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">set_autoscaley_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether autoscaling for the y-axis is applied on plot commands</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="n">b</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">use_sticky_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        When autoscaling, whether to obey all `Artist.sticky_edges`.</span>

<span class="sd">        Default is ``True``.</span>

<span class="sd">        Setting this to ``False`` ensures that the specified margins</span>
<span class="sd">        will be applied, even if the plot includes an image, for</span>
<span class="sd">        example, which would otherwise force a view limit to coincide</span>
<span class="sd">        with its data limit.</span>

<span class="sd">        The changing this property does not change the plot until</span>
<span class="sd">        `autoscale` or `autoscale_view` is called.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_use_sticky_edges</span>

    <span class="nd">@use_sticky_edges</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">use_sticky_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_use_sticky_edges</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="c1"># No effect until next autoscaling, which will mark the axes as stale.</span>

    <span class="k">def</span> <span class="nf">set_xmargin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set padding of X data limits prior to autoscaling.</span>

<span class="sd">        *m* times the data interval will be added to each</span>
<span class="sd">        end of that interval before it is used in autoscaling.</span>
<span class="sd">        For example, if your data is in the range [0, 2], a factor of</span>
<span class="sd">        ``m = 0.1`` will result in a range [-0.2, 2.2].</span>

<span class="sd">        Negative values -0.5 &lt; m &lt; 0 will result in clipping of the data range.</span>
<span class="sd">        I.e. for a data range [0, 2], a factor of ``m = -0.1`` will result in</span>
<span class="sd">        a range [0.2, 1.8].</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        m : float greater than -0.5</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;margin must be greater than -0.5&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="n">scalex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">set_ymargin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set padding of Y data limits prior to autoscaling.</span>

<span class="sd">        *m* times the data interval will be added to each</span>
<span class="sd">        end of that interval before it is used in autoscaling.</span>
<span class="sd">        For example, if your data is in the range [0, 2], a factor of</span>
<span class="sd">        ``m = 0.1`` will result in a range [-0.2, 2.2].</span>

<span class="sd">        Negative values -0.5 &lt; m &lt; 0 will result in clipping of the data range.</span>
<span class="sd">        I.e. for a data range [0, 2], a factor of ``m = -0.1`` will result in</span>
<span class="sd">        a range [0.2, 1.8].</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        m : float greater than -0.5</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;margin must be greater than -0.5&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="n">scalex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">margins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">margins</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set or retrieve autoscaling margins.</span>

<span class="sd">        The padding added to each limit of the axes is the *margin*</span>
<span class="sd">        times the data interval. All input parameters must be floats</span>
<span class="sd">        within the range [0, 1]. Passing both positional and keyword</span>
<span class="sd">        arguments is invalid and will raise a TypeError. If no</span>
<span class="sd">        arguments (positional or otherwise) are provided, the current</span>
<span class="sd">        margins will remain in place and simply be returned.</span>

<span class="sd">        Specifying any margin changes only the autoscaling; for example,</span>
<span class="sd">        if *xmargin* is not None, then *xmargin* times the X data</span>
<span class="sd">        interval will be added to each end of that interval before</span>
<span class="sd">        it is used in autoscaling.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        *margins : float, optional</span>
<span class="sd">            If a single positional argument is provided, it specifies</span>
<span class="sd">            both margins of the x-axis and y-axis limits. If two</span>
<span class="sd">            positional arguments are provided, they will be interpreted</span>
<span class="sd">            as *xmargin*, *ymargin*. If setting the margin on a single</span>
<span class="sd">            axis is desired, use the keyword arguments described below.</span>

<span class="sd">        x, y : float, optional</span>
<span class="sd">            Specific margin values for the x-axis and y-axis,</span>
<span class="sd">            respectively. These cannot be used with positional</span>
<span class="sd">            arguments, but can be used individually to alter on e.g.,</span>
<span class="sd">            only the y-axis.</span>

<span class="sd">        tight : bool or None, default: True</span>
<span class="sd">            The *tight* parameter is passed to :meth:`autoscale_view`,</span>
<span class="sd">            which is executed after a margin is changed; the default</span>
<span class="sd">            here is *True*, on the assumption that when margins are</span>
<span class="sd">            specified, no additional padding to match tick marks is</span>
<span class="sd">            usually desired.  Set *tight* to *None* will preserve</span>
<span class="sd">            the previous setting.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xmargin, ymargin : float</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        If a previously used Axes method such as :meth:`pcolor` has set</span>
<span class="sd">        :attr:`use_sticky_edges` to `True`, only the limits not set by</span>
<span class="sd">        the &quot;sticky artists&quot; will be modified. To force all of the</span>
<span class="sd">        margins to be set, set :attr:`use_sticky_edges` to `False`</span>
<span class="sd">        before calling :meth:`margins`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">margins</span> <span class="ow">and</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Cannot pass both positional and keyword &#39;</span>
                            <span class="s1">&#39;arguments for x and/or y.&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="n">margins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">margins</span>
        <span class="k">elif</span> <span class="n">margins</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Must pass a single positional argument for all &#39;</span>
                            <span class="s1">&#39;margins, or one for each margin (x, y).&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">cbook</span><span class="o">.</span><span class="n">_warn_external</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ignoring tight=</span><span class="si">{</span><span class="n">tight</span><span class="si">!r}</span><span class="s1"> in get mode&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span>

        <span class="k">if</span> <span class="n">tight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="n">tight</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xmargin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ymargin</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_rasterization_zorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        z : float or None</span>
<span class="sd">            zorder below which artists are rasterized.  ``None`` means that</span>
<span class="sd">            artists do not get rasterized based on zorder.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span> <span class="o">=</span> <span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_rasterization_zorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the zorder value below which artists will be rasterized.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span>

    <span class="k">def</span> <span class="nf">autoscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Autoscale the axis view to the data (toggle).</span>

<span class="sd">        Convenience method for simple axis view autoscaling.</span>
<span class="sd">        It turns autoscaling on or off, and then,</span>
<span class="sd">        if autoscaling for either axis is on, it performs</span>
<span class="sd">        the autoscaling on the specified axis or axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        enable : bool or None, default: True</span>
<span class="sd">            True turns autoscaling on, False turns it off.</span>
<span class="sd">            None leaves the autoscaling state unchanged.</span>
<span class="sd">        axis : {&#39;both&#39;, &#39;x&#39;, &#39;y&#39;}, default: &#39;both&#39;</span>
<span class="sd">            Which axis to operate on.</span>
<span class="sd">        tight : bool or None, default: None</span>
<span class="sd">            If True, first set the margins to zero.  Then, this argument is</span>
<span class="sd">            forwarded to `autoscale_view` (regardless of its value); see the</span>
<span class="sd">            description of its behavior there.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">enable</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scalex</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">scaley</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">scalex</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">scaley</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span>
                <span class="n">scalex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span>
                <span class="n">scaley</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">and</span> <span class="n">scalex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">and</span> <span class="n">scaley</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="n">scalex</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">scaley</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">autoscale_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Autoscale the view limits using the data limits.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tight : bool or None</span>
<span class="sd">            If *True*, only expand the axis limits using the margins.  Note</span>
<span class="sd">            that unlike for `autoscale`, ``tight=True`` does *not* set the</span>
<span class="sd">            margins to zero.</span>

<span class="sd">            If *False* and :rc:`axes.autolimit_mode` is &#39;round_numbers&#39;, then</span>
<span class="sd">            after expansion by the margins, further expand the axis limits</span>
<span class="sd">            using the axis major locator.</span>

<span class="sd">            If None (the default), reuse the value set in the previous call to</span>
<span class="sd">            `autoscale_view` (the initial value is False, but the default style</span>
<span class="sd">            sets :rc:`axes.autolimit_mode` to &#39;data&#39;, in which case this</span>
<span class="sd">            behaves like True).</span>

<span class="sd">        scalex : bool, default: True</span>
<span class="sd">            Whether to autoscale the x axis.</span>

<span class="sd">        scaley : bool, default: True</span>
<span class="sd">            Whether to autoscale the y axis.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The autoscaling preserves any preexisting axis direction reversal.</span>

<span class="sd">        The data limits are not updated automatically when artist data are</span>
<span class="sd">        changed after the artist has been added to an Axes instance.  In that</span>
<span class="sd">        case, use :meth:`matplotlib.axes.Axes.relim` prior to calling</span>
<span class="sd">        autoscale_view.</span>

<span class="sd">        If the views of the axes are fixed, e.g. via `set_xlim`, they will</span>
<span class="sd">        not be changed by autoscale_view().</span>
<span class="sd">        See :meth:`matplotlib.axes.Axes.autoscale` for an alternative.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">tight</span><span class="p">)</span>

        <span class="n">x_stickies</span> <span class="o">=</span> <span class="n">y_stickies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_sticky_edges</span><span class="p">:</span>
            <span class="c1"># Only iterate over axes and artists if needed.  The check for</span>
            <span class="c1"># ``hasattr(ax, &quot;lines&quot;)`` is necessary because this can be called</span>
            <span class="c1"># very early in the axes init process (e.g., for twin axes) when</span>
            <span class="c1"># these attributes don&#39;t even exist yet, in which case</span>
            <span class="c1"># `get_children` would raise an AttributeError.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="ow">and</span> <span class="n">scalex</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span><span class="p">:</span>
                <span class="n">x_stickies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span>
                    <span class="n">artist</span><span class="o">.</span><span class="n">sticky_edges</span><span class="o">.</span><span class="n">x</span>
                    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">&quot;lines&quot;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_children</span><span class="p">()]))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="ow">and</span> <span class="n">scaley</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span><span class="p">:</span>
                <span class="n">y_stickies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span>
                    <span class="n">artist</span><span class="o">.</span><span class="n">sticky_edges</span><span class="o">.</span><span class="n">y</span>
                    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">&quot;lines&quot;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_children</span><span class="p">()]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
            <span class="n">x_stickies</span> <span class="o">=</span> <span class="n">x_stickies</span><span class="p">[</span><span class="n">x_stickies</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
            <span class="n">y_stickies</span> <span class="o">=</span> <span class="n">y_stickies</span><span class="p">[</span><span class="n">y_stickies</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">handle_single_axis</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">autoscaleon</span><span class="p">,</span> <span class="n">shared_axes</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span>
                               <span class="n">minpos</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">margin</span><span class="p">,</span> <span class="n">stickies</span><span class="p">,</span> <span class="n">set_bound</span><span class="p">):</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">scale</span> <span class="ow">and</span> <span class="n">autoscaleon</span><span class="p">):</span>
                <span class="k">return</span>  <span class="c1"># nothing to do...</span>

            <span class="n">shared</span> <span class="o">=</span> <span class="n">shared_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">dl</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">dataLim</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">shared</span><span class="p">]</span>
            <span class="c1"># ignore non-finite data limits if good limits exist</span>
            <span class="n">finite_dl</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dl</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">finite_dl</span><span class="p">):</span>
                <span class="c1"># if finite limits exist for at least one axis (and the</span>
                <span class="c1"># other is infinite), restore the finite limits</span>
                <span class="n">x_finite</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dl</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">intervalx</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="ow">and</span>
                                <span class="p">(</span><span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">finite_dl</span><span class="p">))]</span>
                <span class="n">y_finite</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dl</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">intervaly</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="ow">and</span>
                                <span class="p">(</span><span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">finite_dl</span><span class="p">))]</span>

                <span class="n">dl</span> <span class="o">=</span> <span class="n">finite_dl</span>
                <span class="n">dl</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">x_finite</span><span class="p">)</span>
                <span class="n">dl</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">y_finite</span><span class="p">)</span>

            <span class="n">bb</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxBase</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">dl</span><span class="p">)</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bb</span><span class="p">,</span> <span class="n">interval</span><span class="p">)</span>
            <span class="c1"># If x0 and x1 are non finite, use the locator to figure out</span>
            <span class="c1"># default limits.</span>
            <span class="n">locator</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>

            <span class="c1"># Prevent margin addition from crossing a sticky value.  A small</span>
            <span class="c1"># tolerance must be added due to floating point issues with</span>
            <span class="c1"># streamplot; it is defined relative to x0, x1, x1-x0 but has</span>
            <span class="c1"># no absolute term (e.g. &quot;+1e-8&quot;) to avoid issues when working with</span>
            <span class="c1"># datasets where all values are tiny (less than 1e-8).</span>
            <span class="n">tol</span> <span class="o">=</span> <span class="mf">1e-5</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x0</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x1</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">))</span>
            <span class="c1"># Index of largest element &lt; x0 + tol, if any.</span>
            <span class="n">i0</span> <span class="o">=</span> <span class="n">stickies</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">x0</span> <span class="o">+</span> <span class="n">tol</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">x0bound</span> <span class="o">=</span> <span class="n">stickies</span><span class="p">[</span><span class="n">i0</span><span class="p">]</span> <span class="k">if</span> <span class="n">i0</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="c1"># Index of smallest element &gt; x1 - tol, if any.</span>
            <span class="n">i1</span> <span class="o">=</span> <span class="n">stickies</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">tol</span><span class="p">)</span>
            <span class="n">x1bound</span> <span class="o">=</span> <span class="n">stickies</span><span class="p">[</span><span class="n">i1</span><span class="p">]</span> <span class="k">if</span> <span class="n">i1</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">stickies</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>

            <span class="c1"># Add the margin in figure space and then transform back, to handle</span>
            <span class="c1"># non-linear scales.</span>
            <span class="n">minpos</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bb</span><span class="p">,</span> <span class="n">minpos</span><span class="p">)</span>
            <span class="n">transform</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
            <span class="n">inverse_trans</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">_scale</span><span class="o">.</span><span class="n">limit_range_for_scale</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">minpos</span><span class="p">)</span>
            <span class="n">x0t</span><span class="p">,</span> <span class="n">x1t</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">])</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1t</span> <span class="o">-</span> <span class="n">x0t</span><span class="p">)</span> <span class="o">*</span> <span class="n">margin</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">delta</span><span class="p">):</span>
                <span class="n">delta</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># If a bound isn&#39;t finite, set margin to zero.</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">inverse_trans</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">x0t</span> <span class="o">-</span> <span class="n">delta</span><span class="p">,</span> <span class="n">x1t</span> <span class="o">+</span> <span class="n">delta</span><span class="p">])</span>

            <span class="c1"># Apply sticky bounds.</span>
            <span class="k">if</span> <span class="n">x0bound</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">x0</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x0bound</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x1bound</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x1bound</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span><span class="p">:</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="n">view_limits</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="n">set_bound</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="c1"># End of definition of internal function &#39;handle_single_axis&#39;.</span>

        <span class="n">handle_single_axis</span><span class="p">(</span>
            <span class="n">scalex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="p">,</span> <span class="s1">&#39;intervalx&#39;</span><span class="p">,</span>
            <span class="s1">&#39;minposx&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span><span class="p">,</span> <span class="n">x_stickies</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">)</span>
        <span class="n">handle_single_axis</span><span class="p">(</span>
            <span class="n">scaley</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="p">,</span> <span class="s1">&#39;intervaly&#39;</span><span class="p">,</span>
            <span class="s1">&#39;minposy&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span><span class="p">,</span> <span class="n">y_stickies</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_axis_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span>

    <span class="k">def</span> <span class="nf">_get_axis_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a mapping of `Axis` &quot;names&quot; to `Axis` instances.</span>

<span class="sd">        The `Axis` name is derived from the attribute under which the instance</span>
<span class="sd">        is stored, so e.g. for polar axes, the theta-axis is still named &quot;x&quot;</span>
<span class="sd">        and the r-axis is still named &quot;y&quot; (for back-compatibility).</span>

<span class="sd">        In practice, this means that the entries are typically &quot;x&quot; and &quot;y&quot;, and</span>
<span class="sd">        additionally &quot;z&quot; for 3D axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">axis_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;axis&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">axis_list</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;axis&quot;</span><span class="p">)]]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">_update_title_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the title position based on the bounding box enclosing</span>
<span class="sd">        all the ticklabels and x-axis spine and xlabel...</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autotitlepos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autotitlepos</span><span class="p">:</span>
            <span class="n">_log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;title position was updated manually, not adjusting&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">titles</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">titles</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="c1"># need to start again in case of window resizing</span>
            <span class="n">title</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
            <span class="c1"># need to check all our twins too...</span>
            <span class="n">axs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="c1"># and all the children</span>
            <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">locator</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">locator</span><span class="p">:</span>
                        <span class="n">pos</span> <span class="o">=</span> <span class="n">locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">()</span>
                    <span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span> <span class="o">+</span> <span class="p">[</span><span class="n">ax</span><span class="p">]</span>
            <span class="n">top</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticks_position</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">]</span>
                        <span class="ow">or</span> <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_label_position</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span><span class="p">):</span>
                    <span class="n">bb</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bb</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">bb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">top</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="n">bb</span><span class="o">.</span><span class="n">ymax</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span><span class="o">.</span><span class="n">ymin</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="p">))</span>
                <span class="n">title</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
                <span class="c1"># empirically, this doesn&#39;t always get the min to top,</span>
                <span class="c1"># so we need to adjust again.</span>
                <span class="k">if</span> <span class="n">title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span><span class="o">.</span><span class="n">ymin</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
                    <span class="n">_</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                        <span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">top</span> <span class="o">-</span> <span class="n">title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span><span class="o">.</span><span class="n">ymin</span><span class="p">))</span>
                    <span class="n">title</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

        <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">title</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">titles</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">titles</span><span class="p">:</span>
            <span class="c1"># now line up all the titles at the highest baseline.</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="n">title</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>

    <span class="c1"># Drawing</span>
    <span class="nd">@martist</span><span class="o">.</span><span class="n">allow_rasterization</span>
    <span class="nd">@cbook</span><span class="o">.</span><span class="n">_delete_parameter</span><span class="p">(</span>
        <span class="s2">&quot;3.3&quot;</span><span class="p">,</span> <span class="s2">&quot;inframe&quot;</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s2">&quot;Axes.redraw_in_frame()&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inframe</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cbook</span><span class="o">.</span><span class="n">warn_deprecated</span><span class="p">(</span>
                <span class="s2">&quot;3.3&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Support for not passing the &#39;renderer&#39; &quot;</span>
                <span class="s2">&quot;parameter to Axes.draw() is deprecated since </span><span class="si">%(since)s</span><span class="s2"> and &quot;</span>
                <span class="s2">&quot;will be removed </span><span class="si">%(removal)s</span><span class="s2">.  Use axes.draw_artist(axes) &quot;</span>
                <span class="s2">&quot;instead.&quot;</span><span class="p">)</span>
            <span class="n">renderer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">_cachedRenderer</span>
        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;No renderer defined&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unstale_viewLim</span><span class="p">()</span>

        <span class="n">renderer</span><span class="o">.</span><span class="n">open_group</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="n">gid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_gid</span><span class="p">())</span>

        <span class="c1"># prevent triggering call backs during the draw process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># loop over self and child axes...</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">locator</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">()</span>

        <span class="n">artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>
        <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="c1"># the frame draws the edges around the axes patch -- we</span>
        <span class="c1"># decouple these so the patch can be in the background and the</span>
        <span class="c1"># frame in the foreground. Do this before drawing the axis</span>
        <span class="c1"># objects so that the spine has the opportunity to update them.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">spine</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_title_position</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">or</span> <span class="n">inframe</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_list</span><span class="p">():</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">_axis</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">inframe</span><span class="p">:</span>
            <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
            <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">)</span>
            <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">is_saving</span><span class="p">():</span>
            <span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists</span>
                       <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">get_animated</span><span class="p">()</span> <span class="ow">or</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">]</span>
        <span class="n">artists</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s1">&#39;zorder&#39;</span><span class="p">))</span>

        <span class="c1"># rasterize artists with negative zorder</span>
        <span class="c1"># if the minimum zorder is negative, start rasterization</span>
        <span class="n">rasterization_zorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">rasterization_zorder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                <span class="n">artists</span> <span class="ow">and</span> <span class="n">artists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">zorder</span> <span class="o">&lt;</span> <span class="n">rasterization_zorder</span><span class="p">):</span>
            <span class="n">renderer</span><span class="o">.</span><span class="n">start_rasterizing</span><span class="p">()</span>
            <span class="n">artists_rasterized</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists</span>
                                  <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">zorder</span> <span class="o">&lt;</span> <span class="n">rasterization_zorder</span><span class="p">]</span>
            <span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists</span>
                       <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">zorder</span> <span class="o">&gt;=</span> <span class="n">rasterization_zorder</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">artists_rasterized</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># the patch draws the background rectangle -- the frame below</span>
        <span class="c1"># will draw the edges</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">artists_rasterized</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists_rasterized</span><span class="p">:</span>
                <span class="n">a</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
            <span class="n">renderer</span><span class="o">.</span><span class="n">stop_rasterizing</span><span class="p">()</span>

        <span class="n">mimage</span><span class="o">.</span><span class="n">_draw_list_compositing_images</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">artists</span><span class="p">)</span>

        <span class="n">renderer</span><span class="o">.</span><span class="n">close_group</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">draw_artist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Efficiently redraw a single artist.</span>

<span class="sd">        This method can only be used after an initial draw which caches the</span>
<span class="sd">        renderer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">_cachedRenderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;draw_artist can only be used after an &quot;</span>
                                 <span class="s2">&quot;initial draw which caches the renderer&quot;</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">_cachedRenderer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">redraw_in_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Efficiently redraw Axes data, but not axis ticks, labels, etc.</span>

<span class="sd">        This method can only be used after an initial draw which caches the</span>
<span class="sd">        renderer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">_cachedRenderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;redraw_in_frame can only be used after an &quot;</span>
                                 <span class="s2">&quot;initial draw which caches the renderer&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">ExitStack</span><span class="p">()</span> <span class="k">as</span> <span class="n">stack</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="p">[</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_list</span><span class="p">(),</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">]:</span>
                <span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">artist</span><span class="o">.</span><span class="n">set_visible</span><span class="p">,</span> <span class="n">artist</span><span class="o">.</span><span class="n">get_visible</span><span class="p">())</span>
                <span class="n">artist</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">_cachedRenderer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_renderer_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">_cachedRenderer</span>

    <span class="c1"># Axes rectangle characteristics</span>

    <span class="k">def</span> <span class="nf">get_frame_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get whether the axes rectangle patch is drawn.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span>

    <span class="k">def</span> <span class="nf">set_frame_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether the axes rectangle patch is drawn.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_axisbelow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether axis ticks and gridlines are above or below most artists.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool or &#39;line&#39;</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        set_axisbelow</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span>

    <span class="k">def</span> <span class="nf">set_axisbelow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether axis ticks and gridlines are above or below most artists.</span>

<span class="sd">        This controls the zorder of the ticks and gridlines. For more</span>
<span class="sd">        information on the zorder see :doc:`/gallery/misc/zorder_demo`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool or &#39;line&#39;</span>
<span class="sd">            Possible values:</span>

<span class="sd">            - *True* (zorder = 0.5): Ticks and gridlines are below all Artists.</span>
<span class="sd">            - &#39;line&#39; (zorder = 1.5): Ticks and gridlines are above patches</span>
<span class="sd">              (e.g. rectangles, with default zorder = 1) but still below lines</span>
<span class="sd">              and markers (with their default zorder = 2).</span>
<span class="sd">            - *False* (zorder = 2.5): Ticks and gridlines are above patches</span>
<span class="sd">              and lines / markers.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        get_axisbelow</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span> <span class="o">=</span> <span class="n">axisbelow</span> <span class="o">=</span> <span class="n">validate_axisbelow</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axisbelow</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">zorder</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="k">elif</span> <span class="n">axisbelow</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">zorder</span> <span class="o">=</span> <span class="mf">2.5</span>
        <span class="k">elif</span> <span class="n">axisbelow</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
            <span class="n">zorder</span> <span class="o">=</span> <span class="mf">1.5</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected axisbelow value&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_list</span><span class="p">():</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="n">zorder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@docstring</span><span class="o">.</span><span class="n">dedent_interpd</span>
    <span class="k">def</span> <span class="nf">grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure the grid lines.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool or None, optional</span>
<span class="sd">            Whether to show the grid lines. If any *kwargs* are supplied,</span>
<span class="sd">            it is assumed you want the grid on and *b* will be set to True.</span>

<span class="sd">            If *b* is *None* and there are no *kwargs*, this toggles the</span>
<span class="sd">            visibility of the lines.</span>

<span class="sd">        which : {&#39;major&#39;, &#39;minor&#39;, &#39;both&#39;}, optional</span>
<span class="sd">            The grid lines to apply the changes on.</span>

<span class="sd">        axis : {&#39;both&#39;, &#39;x&#39;, &#39;y&#39;}, optional</span>
<span class="sd">            The axis to apply the changes on.</span>

<span class="sd">        **kwargs : `.Line2D` properties</span>
<span class="sd">            Define the line properties of the grid, e.g.::</span>

<span class="sd">                grid(color=&#39;r&#39;, linestyle=&#39;-&#39;, linewidth=2)</span>

<span class="sd">            Valid keyword arguments are:</span>

<span class="sd">            %(_Line2D_docstr)s</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The axis is drawn as a unit, so the effective zorder for drawing the</span>
<span class="sd">        grid is determined by the zorder of each axis, not by the zorder of the</span>
<span class="sd">        `.Line2D` objects comprising the grid.  Therefore, to set grid zorder,</span>
<span class="sd">        use `.set_axisbelow` or, for more control, call the</span>
<span class="sd">        `~.Artist.set_zorder` method of each axis.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">b</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">cbook</span><span class="o">.</span><span class="n">_check_in_list</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ticklabel_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">scilimits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">useOffset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">useLocale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">useMathText</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure the `.ScalarFormatter` used by default for linear axes.</span>

<span class="sd">        If a parameter is not set, the corresponding property of the formatter</span>
<span class="sd">        is left unchanged.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axis : {&#39;x&#39;, &#39;y&#39;, &#39;both&#39;}, default: &#39;both&#39;</span>
<span class="sd">            The axes to configure.  Only major ticks are affected.</span>

<span class="sd">        style : {&#39;sci&#39;, &#39;scientific&#39;, &#39;plain&#39;}</span>
<span class="sd">            Whether to use scientific notation.</span>
<span class="sd">            The formatter default is to use scientific notation.</span>

<span class="sd">        scilimits : pair of ints (m, n)</span>
<span class="sd">            Scientific notation is used only for numbers outside the range</span>
<span class="sd">            10\ :sup:`m` to 10\ :sup:`n` (and only if the formatter is</span>
<span class="sd">            configured to use scientific notation at all).  Use (0, 0) to</span>
<span class="sd">            include all numbers.  Use (m, m) where m != 0 to fix the order of</span>
<span class="sd">            magnitude to 10\ :sup:`m`.</span>
<span class="sd">            The formatter default is :rc:`axes.formatter.limits`.</span>

<span class="sd">        useOffset : bool or float</span>
<span class="sd">            If True, the offset is calculated as needed.</span>
<span class="sd">            If False, no offset is used.</span>
<span class="sd">            If a numeric value, it sets the offset.</span>
<span class="sd">            The formatter default is :rc:`axes.formatter.useoffset`.</span>

<span class="sd">        useLocale : bool</span>
<span class="sd">            Whether to format the number using the current locale or using the</span>
<span class="sd">            C (English) locale.  This affects e.g. the decimal separator.  The</span>
<span class="sd">            formatter default is :rc:`axes.formatter.use_locale`.</span>

<span class="sd">        useMathText : bool</span>
<span class="sd">            Render the offset and scientific notation in mathtext.</span>
<span class="sd">            The formatter default is :rc:`axes.formatter.use_mathtext`.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        AttributeError</span>
<span class="sd">            If the current formatter is not a `.ScalarFormatter`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">style</span> <span class="o">=</span> <span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">scilimits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">scilimits</span>
                <span class="n">m</span> <span class="o">+</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># check that both are numbers</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;scilimits must be a sequence of 2 integers&quot;</span>
                                 <span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>
        <span class="n">STYLES</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sci&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;scientific&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;plain&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="n">is_sci_style</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">_check_getitem</span><span class="p">(</span><span class="n">STYLES</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">)</span>
        <span class="n">axis_map</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_map</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
                    <span class="s1">&#39;both&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_list</span><span class="p">()}</span>
        <span class="n">axises</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">_check_getitem</span><span class="p">(</span><span class="n">axis_map</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="n">axises</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_sci_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_scientific</span><span class="p">(</span><span class="n">is_sci_style</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">scilimits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_powerlimits</span><span class="p">(</span><span class="n">scilimits</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">useOffset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useOffset</span><span class="p">(</span><span class="n">useOffset</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">useLocale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useLocale</span><span class="p">(</span><span class="n">useLocale</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">useMathText</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useMathText</span><span class="p">(</span><span class="n">useMathText</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="s2">&quot;This method only works with the ScalarFormatter&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>

    <span class="k">def</span> <span class="nf">locator_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Control behavior of major tick locators.</span>

<span class="sd">        Because the locator is involved in autoscaling, `~.Axes.autoscale_view`</span>
<span class="sd">        is called automatically after the parameters are changed.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axis : {&#39;both&#39;, &#39;x&#39;, &#39;y&#39;}, default: &#39;both&#39;</span>
<span class="sd">            The axis on which to operate.</span>

<span class="sd">        tight : bool or None, optional</span>
<span class="sd">            Parameter passed to `~.Axes.autoscale_view`.</span>
<span class="sd">            Default is None, for no change.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>
<span class="sd">        **kwargs</span>
<span class="sd">            Remaining keyword arguments are passed to directly to the</span>
<span class="sd">            ``set_params()`` method of the locator. Supported keywords depend</span>
<span class="sd">            on the type of the locator. See for example</span>
<span class="sd">            `~.ticker.MaxNLocator.set_params` for the `.ticker.MaxNLocator`</span>
<span class="sd">            used by default for linear axes.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        When plotting small subplots, one might want to reduce the maximum</span>
<span class="sd">        number of ticks and use tight bounds, for example::</span>

<span class="sd">            ax.locator_params(tight=True, nbins=4)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cbook</span><span class="o">.</span><span class="n">_check_in_list</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="n">update_x</span> <span class="o">=</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]</span>
        <span class="n">update_y</span> <span class="o">=</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">update_x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">update_y</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">,</span>
                                     <span class="n">scalex</span><span class="o">=</span><span class="n">update_x</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">update_y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">tick_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the appearance of ticks, tick labels, and gridlines.</span>

<span class="sd">        Tick properties that are not explicitly set using the keyword</span>
<span class="sd">        arguments remain unchanged unless *reset* is True.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axis : {&#39;x&#39;, &#39;y&#39;, &#39;both&#39;}, default: &#39;both&#39;</span>
<span class="sd">            The axis to which the parameters are applied.</span>
<span class="sd">        which : {&#39;major&#39;, &#39;minor&#39;, &#39;both&#39;}, default: &#39;major&#39;</span>
<span class="sd">            The group of ticks to which the parameters are applied.</span>
<span class="sd">        reset : bool, default: False</span>
<span class="sd">            Whether to reset the ticks to defaults before updating them.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>
<span class="sd">        direction : {&#39;in&#39;, &#39;out&#39;, &#39;inout&#39;}</span>
<span class="sd">            Puts ticks inside the axes, outside the axes, or both.</span>
<span class="sd">        length : float</span>
<span class="sd">            Tick length in points.</span>
<span class="sd">        width : float</span>
<span class="sd">            Tick width in points.</span>
<span class="sd">        color : color</span>
<span class="sd">            Tick color.</span>
<span class="sd">        pad : float</span>
<span class="sd">            Distance in points between tick and label.</span>
<span class="sd">        labelsize : float or str</span>
<span class="sd">            Tick label font size in points or as a string (e.g., &#39;large&#39;).</span>
<span class="sd">        labelcolor : color</span>
<span class="sd">            Tick label color.</span>
<span class="sd">        colors : color</span>
<span class="sd">            Tick color and label color.</span>
<span class="sd">        zorder : float</span>
<span class="sd">            Tick and label zorder.</span>
<span class="sd">        bottom, top, left, right : bool</span>
<span class="sd">            Whether to draw the respective ticks.</span>
<span class="sd">        labelbottom, labeltop, labelleft, labelright : bool</span>
<span class="sd">            Whether to draw the respective tick labels.</span>
<span class="sd">        labelrotation : float</span>
<span class="sd">            Tick label rotation</span>
<span class="sd">        grid_color : color</span>
<span class="sd">            Gridline color.</span>
<span class="sd">        grid_alpha : float</span>
<span class="sd">            Transparency of gridlines: 0 (transparent) to 1 (opaque).</span>
<span class="sd">        grid_linewidth : float</span>
<span class="sd">            Width of gridlines in points.</span>
<span class="sd">        grid_linestyle : str</span>
<span class="sd">            Any valid `.Line2D` line style spec.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        ::</span>

<span class="sd">            ax.tick_params(direction=&#39;out&#39;, length=6, width=2, colors=&#39;r&#39;,</span>
<span class="sd">                           grid_color=&#39;r&#39;, grid_alpha=0.5)</span>

<span class="sd">        This will make all major ticks be red, pointing out of the box,</span>
<span class="sd">        and with dimensions 6 points by 2 points.  Tick labels will</span>
<span class="sd">        also be red.  Gridlines will be red and translucent.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cbook</span><span class="o">.</span><span class="n">_check_in_list</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
            <span class="n">xkw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labelleft&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labelright&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="o">**</span><span class="n">xkw</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
            <span class="n">ykw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labeltop&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labelbottom&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="o">**</span><span class="n">ykw</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_axis_off</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Turn the x- and y-axis off.</span>

<span class="sd">        This affects the axis lines, ticks, ticklabels, grid and axis labels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">set_axis_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Turn the x- and y-axis on.</span>

<span class="sd">        This affects the axis lines, ticks, ticklabels, grid and axis labels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># data limits, ticks, tick labels, and formatting</span>

    <span class="k">def</span> <span class="nf">invert_xaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Invert the x-axis.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        xaxis_inverted</span>
<span class="sd">        get_xlim, set_xlim</span>
<span class="sd">        get_xbound, set_xbound</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_inverted</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_inverted</span><span class="p">())</span>

    <span class="n">xaxis_inverted</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_inverted&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xbound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the lower and upper x-axis bounds, in increasing order.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        set_xbound</span>
<span class="sd">        get_xlim, set_xlim</span>
<span class="sd">        invert_xaxis, xaxis_inverted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">right</span><span class="p">,</span> <span class="n">left</span>

    <span class="k">def</span> <span class="nf">set_xbound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the lower and upper numerical bounds of the x-axis.</span>

<span class="sd">        This method will honor axes inversion regardless of parameter order.</span>
<span class="sd">        It will not change the autoscaling setting (`.get_autoscalex_on()`).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        lower, upper : float or None</span>
<span class="sd">            The lower and upper bounds. If *None*, the respective axis bound</span>
<span class="sd">            is not modified.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        get_xbound</span>
<span class="sd">        get_xlim, set_xlim</span>
<span class="sd">        invert_xaxis, xaxis_inverted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">lower</span><span class="p">):</span>
            <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">lower</span>

        <span class="n">old_lower</span><span class="p">,</span> <span class="n">old_upper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">lower</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="n">old_lower</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="n">old_upper</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="nb">sorted</span><span class="p">((</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">),</span>
                             <span class="n">reverse</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis_inverted</span><span class="p">())),</span>
                      <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the x-axis view limits.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        left, right : (float, float)</span>
<span class="sd">            The current x-axis limits in data coordinates.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        set_xlim</span>
<span class="sd">        set_xbound, get_xbound</span>
<span class="sd">        invert_xaxis, xaxis_inverted</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The x-axis may be inverted, in which case the *left* value will</span>
<span class="sd">        be greater than the *right* value.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_validate_converted_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">convert</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Raise ValueError if converted limits are non-finite.</span>

<span class="sd">        Note that this function also accepts None as a limit argument.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The limit value after call to convert(), or None if limit is None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">converted_limit</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">converted_limit</span><span class="p">,</span> <span class="n">Real</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">converted_limit</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Axis limits cannot be NaN or Inf&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">converted_limit</span>

    <span class="k">def</span> <span class="nf">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="o">*</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the x-axis view limits.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        left : float, optional</span>
<span class="sd">            The left xlim in data coordinates. Passing *None* leaves the</span>
<span class="sd">            limit unchanged.</span>

<span class="sd">            The left and right xlims may also be passed as the tuple</span>
<span class="sd">            (*left*, *right*) as the first positional argument (or as</span>
<span class="sd">            the *left* keyword argument).</span>

<span class="sd">            .. ACCEPTS: (bottom: float, top: float)</span>

<span class="sd">        right : float, optional</span>
<span class="sd">            The right xlim in data coordinates. Passing *None* leaves the</span>
<span class="sd">            limit unchanged.</span>

<span class="sd">        emit : bool, default: True</span>
<span class="sd">            Whether to notify observers of limit change.</span>

<span class="sd">        auto : bool or None, default: False</span>
<span class="sd">            Whether to turn on autoscaling of the x-axis. True turns on,</span>
<span class="sd">            False turns off, None leaves unchanged.</span>

<span class="sd">        xmin, xmax : float, optional</span>
<span class="sd">            They are equivalent to left and right respectively,</span>
<span class="sd">            and it is an error to pass both *xmin* and *left* or</span>
<span class="sd">            *xmax* and *right*.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        left, right : (float, float)</span>
<span class="sd">            The new x-axis limits in data coordinates.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        get_xlim</span>
<span class="sd">        set_xbound, get_xbound</span>
<span class="sd">        invert_xaxis, xaxis_inverted</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The *left* value may be greater than the *right* value, in which</span>
<span class="sd">        case the x-axis values will decrease from left to right.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; set_xlim(left, right)</span>
<span class="sd">        &gt;&gt;&gt; set_xlim((left, right))</span>
<span class="sd">        &gt;&gt;&gt; left, right = set_xlim(left, right)</span>

<span class="sd">        One limit may be left unchanged.</span>

<span class="sd">        &gt;&gt;&gt; set_xlim(right=right_lim)</span>

<span class="sd">        Limits may be passed in reverse order to flip the direction of</span>
<span class="sd">        the x-axis. For example, suppose *x* represents the number of</span>
<span class="sd">        years before present. The x-axis limits might be set like the</span>
<span class="sd">        following so 5000 years ago is on the left of the plot and the</span>
<span class="sd">        present is on the right.</span>

<span class="sd">        &gt;&gt;&gt; set_xlim(5000, 0)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">left</span><span class="p">):</span>
            <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">left</span>
        <span class="k">if</span> <span class="n">xmin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">left</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Cannot pass both `xmin` and `left`&#39;</span><span class="p">)</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">xmin</span>
        <span class="k">if</span> <span class="n">xmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Cannot pass both `xmax` and `right`&#39;</span><span class="p">)</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">xmax</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_process_unit_info</span><span class="p">(</span><span class="n">xdata</span><span class="o">=</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">))</span>
        <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_converted_limits</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">)</span>
        <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_converted_limits</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">left</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">right</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Axes init calls set_xlim(0, 1) before get_xlim() can be called,</span>
            <span class="c1"># so only grab the limits if we really need them.</span>
            <span class="n">old_left</span><span class="p">,</span> <span class="n">old_right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">left</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">old_left</span>
            <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">old_right</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span> <span class="ow">and</span> <span class="p">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">right</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
            <span class="c1"># Axes init calls set_xlim(0, 1) before get_xlim() can be called,</span>
            <span class="c1"># so only grab the limits if we really need them.</span>
            <span class="n">old_left</span><span class="p">,</span> <span class="n">old_right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">left</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">cbook</span><span class="o">.</span><span class="n">_warn_external</span><span class="p">(</span>
                    <span class="s1">&#39;Attempted to set non-positive left xlim on a &#39;</span>
                    <span class="s1">&#39;log-scaled axis.</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;Invalid limit will be ignored.&#39;</span><span class="p">)</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">old_left</span>
            <span class="k">if</span> <span class="n">right</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">cbook</span><span class="o">.</span><span class="n">_warn_external</span><span class="p">(</span>
                    <span class="s1">&#39;Attempted to set non-positive right xlim on a &#39;</span>
                    <span class="s1">&#39;log-scaled axis.</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;Invalid limit will be ignored.&#39;</span><span class="p">)</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">old_right</span>
        <span class="k">if</span> <span class="n">left</span> <span class="o">==</span> <span class="n">right</span><span class="p">:</span>
            <span class="n">cbook</span><span class="o">.</span><span class="n">_warn_external</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Attempting to set identical left == right == </span><span class="si">{</span><span class="n">left</span><span class="si">}</span><span class="s2"> results &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;in singular transformations; automatically expanding.&quot;</span><span class="p">)</span>
        <span class="n">reverse</span> <span class="o">=</span> <span class="n">left</span> <span class="o">&gt;</span> <span class="n">right</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">limit_range_for_scale</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
        <span class="c1"># cast to bool to avoid bad interaction between python 3.8 and np.bool_</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">reverse</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span><span class="o">.</span><span class="n">intervalx</span> <span class="o">=</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
        <span class="c1"># Mark viewlims as no longer stale without triggering an autoscale.</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_stale_viewlim_x</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">auto</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">auto</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">emit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;xlim_changed&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="c1"># Call all of the other x-axes that are shared with this one</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span><span class="p">,</span>
                                   <span class="n">emit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">figure</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">:</span>
                        <span class="n">other</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span>

    <span class="n">get_xscale</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_scale&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_xscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the x-axis scale.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : {&quot;linear&quot;, &quot;log&quot;, &quot;symlog&quot;, &quot;logit&quot;, ...}</span>
<span class="sd">            The axis scale type to apply.</span>

<span class="sd">        **kwargs</span>
<span class="sd">            Different keyword arguments are accepted, depending on the scale.</span>
<span class="sd">            See the respective class keyword arguments:</span>

<span class="sd">            - `matplotlib.scale.LinearScale`</span>
<span class="sd">            - `matplotlib.scale.LogScale`</span>
<span class="sd">            - `matplotlib.scale.SymmetricalLogScale`</span>
<span class="sd">            - `matplotlib.scale.LogitScale`</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        By default, Matplotlib supports the above mentioned scales.</span>
<span class="sd">        Additionally, custom scales may be registered using</span>
<span class="sd">        `matplotlib.scale.register_scale`. These scales can then also</span>
<span class="sd">        be used here.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_default_lims</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
                            <span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_shared_x_axes</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">new_default_lims</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
                            <span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">old_default_lims</span> <span class="o">!=</span> <span class="n">new_default_lims</span><span class="p">:</span>
            <span class="c1"># Force autoscaling now, to take advantage of the scale locator&#39;s</span>
            <span class="c1"># nonsingular() before it possibly gets swapped out by the user.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">scaley</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">get_xticks</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklocs&quot;</span><span class="p">)</span>
    <span class="n">set_xticks</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;set_ticks&quot;</span><span class="p">)</span>
    <span class="n">get_xmajorticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_majorticklabels&quot;</span><span class="p">)</span>
    <span class="n">get_xminorticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_minorticklabels&quot;</span><span class="p">)</span>
    <span class="n">get_xticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklabels&quot;</span><span class="p">)</span>
    <span class="n">set_xticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span>
        <span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;_set_ticklabels&quot;</span><span class="p">,</span>
        <span class="n">doc_sub</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Axis.set_ticks&quot;</span><span class="p">:</span> <span class="s2">&quot;Axes.set_xticks&quot;</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">invert_yaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Invert the y-axis.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        yaxis_inverted</span>
<span class="sd">        get_ylim, set_ylim</span>
<span class="sd">        get_ybound, set_ybound</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_inverted</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_inverted</span><span class="p">())</span>

    <span class="n">yaxis_inverted</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_inverted&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_ybound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the lower and upper y-axis bounds, in increasing order.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        set_ybound</span>
<span class="sd">        get_ylim, set_ylim</span>
<span class="sd">        invert_yaxis, yaxis_inverted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">bottom</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">top</span><span class="p">,</span> <span class="n">bottom</span>

    <span class="k">def</span> <span class="nf">set_ybound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the lower and upper numerical bounds of the y-axis.</span>

<span class="sd">        This method will honor axes inversion regardless of parameter order.</span>
<span class="sd">        It will not change the autoscaling setting (`.get_autoscaley_on()`).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        lower, upper : float or None</span>
<span class="sd">            The lower and upper bounds. If *None*, the respective axis bound</span>
<span class="sd">            is not modified.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        get_ybound</span>
<span class="sd">        get_ylim, set_ylim</span>
<span class="sd">        invert_yaxis, yaxis_inverted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">lower</span><span class="p">):</span>
            <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">lower</span>

        <span class="n">old_lower</span><span class="p">,</span> <span class="n">old_upper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">lower</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="n">old_lower</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="n">old_upper</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="nb">sorted</span><span class="p">((</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">),</span>
                             <span class="n">reverse</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis_inverted</span><span class="p">())),</span>
                      <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_ylim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the y-axis view limits.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bottom, top : (float, float)</span>
<span class="sd">            The current y-axis limits in data coordinates.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        set_ylim</span>
<span class="sd">        set_ybound, get_ybound</span>
<span class="sd">        invert_yaxis, yaxis_inverted</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The y-axis may be inverted, in which case the *bottom* value</span>
<span class="sd">        will be greater than the *top* value.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervaly</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="o">*</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the y-axis view limits.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bottom : float, optional</span>
<span class="sd">            The bottom ylim in data coordinates. Passing *None* leaves the</span>
<span class="sd">            limit unchanged.</span>

<span class="sd">            The bottom and top ylims may also be passed as the tuple</span>
<span class="sd">            (*bottom*, *top*) as the first positional argument (or as</span>
<span class="sd">            the *bottom* keyword argument).</span>

<span class="sd">            .. ACCEPTS: (bottom: float, top: float)</span>

<span class="sd">        top : float, optional</span>
<span class="sd">            The top ylim in data coordinates. Passing *None* leaves the</span>
<span class="sd">            limit unchanged.</span>

<span class="sd">        emit : bool, default: True</span>
<span class="sd">            Whether to notify observers of limit change.</span>

<span class="sd">        auto : bool or None, default: False</span>
<span class="sd">            Whether to turn on autoscaling of the y-axis. *True* turns on,</span>
<span class="sd">            *False* turns off, *None* leaves unchanged.</span>

<span class="sd">        ymin, ymax : float, optional</span>
<span class="sd">            They are equivalent to bottom and top respectively,</span>
<span class="sd">            and it is an error to pass both *ymin* and *bottom* or</span>
<span class="sd">            *ymax* and *top*.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bottom, top : (float, float)</span>
<span class="sd">            The new y-axis limits in data coordinates.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        get_ylim</span>
<span class="sd">        set_ybound, get_ybound</span>
<span class="sd">        invert_yaxis, yaxis_inverted</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The *bottom* value may be greater than the *top* value, in which</span>
<span class="sd">        case the y-axis values will decrease from *bottom* to *top*.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; set_ylim(bottom, top)</span>
<span class="sd">        &gt;&gt;&gt; set_ylim((bottom, top))</span>
<span class="sd">        &gt;&gt;&gt; bottom, top = set_ylim(bottom, top)</span>

<span class="sd">        One limit may be left unchanged.</span>

<span class="sd">        &gt;&gt;&gt; set_ylim(top=top_lim)</span>

<span class="sd">        Limits may be passed in reverse order to flip the direction of</span>
<span class="sd">        the y-axis. For example, suppose ``y`` represents depth of the</span>
<span class="sd">        ocean in m. The y-axis limits might be set like the following</span>
<span class="sd">        so 5000 m depth is at the bottom of the plot and the surface,</span>
<span class="sd">        0 m, is at the top.</span>

<span class="sd">        &gt;&gt;&gt; set_ylim(5000, 0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">bottom</span><span class="p">):</span>
            <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="n">bottom</span>
        <span class="k">if</span> <span class="n">ymin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">bottom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Cannot pass both `ymin` and `bottom`&#39;</span><span class="p">)</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="n">ymin</span>
        <span class="k">if</span> <span class="n">ymax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Cannot pass both `ymax` and `top`&#39;</span><span class="p">)</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">ymax</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_process_unit_info</span><span class="p">(</span><span class="n">ydata</span><span class="o">=</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">))</span>
        <span class="n">bottom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_converted_limits</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">)</span>
        <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_converted_limits</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bottom</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Axes init calls set_ylim(0, 1) before get_ylim() can be called,</span>
            <span class="c1"># so only grab the limits if we really need them.</span>
            <span class="n">old_bottom</span><span class="p">,</span> <span class="n">old_top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">bottom</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">bottom</span> <span class="o">=</span> <span class="n">old_bottom</span>
            <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="n">old_top</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span> <span class="ow">and</span> <span class="p">(</span><span class="n">bottom</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">top</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
            <span class="c1"># Axes init calls set_xlim(0, 1) before get_xlim() can be called,</span>
            <span class="c1"># so only grab the limits if we really need them.</span>
            <span class="n">old_bottom</span><span class="p">,</span> <span class="n">old_top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">bottom</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">cbook</span><span class="o">.</span><span class="n">_warn_external</span><span class="p">(</span>
                    <span class="s1">&#39;Attempted to set non-positive bottom ylim on a &#39;</span>
                    <span class="s1">&#39;log-scaled axis.</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;Invalid limit will be ignored.&#39;</span><span class="p">)</span>
                <span class="n">bottom</span> <span class="o">=</span> <span class="n">old_bottom</span>
            <span class="k">if</span> <span class="n">top</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">cbook</span><span class="o">.</span><span class="n">_warn_external</span><span class="p">(</span>
                    <span class="s1">&#39;Attempted to set non-positive top ylim on a &#39;</span>
                    <span class="s1">&#39;log-scaled axis.</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;Invalid limit will be ignored.&#39;</span><span class="p">)</span>
                <span class="n">top</span> <span class="o">=</span> <span class="n">old_top</span>
        <span class="k">if</span> <span class="n">bottom</span> <span class="o">==</span> <span class="n">top</span><span class="p">:</span>
            <span class="n">cbook</span><span class="o">.</span><span class="n">_warn_external</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Attempting to set identical bottom == top == </span><span class="si">{</span><span class="n">bottom</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;results in singular transformations; automatically &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;expanding.&quot;</span><span class="p">)</span>
        <span class="n">reverse</span> <span class="o">=</span> <span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">top</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">limit_range_for_scale</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>
        <span class="c1"># cast to bool to avoid bad interaction between python 3.8 and np.bool_</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">reverse</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span><span class="o">.</span><span class="n">intervaly</span> <span class="o">=</span> <span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>
        <span class="c1"># Mark viewlims as no longer stale without triggering an autoscale.</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_stale_viewlim_y</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">auto</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">auto</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">emit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;ylim_changed&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="c1"># Call all of the other y-axes that are shared with this one</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervaly</span><span class="p">,</span>
                                   <span class="n">emit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">figure</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">:</span>
                        <span class="n">other</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span>

    <span class="n">get_yscale</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_scale&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the y-axis scale.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : {&quot;linear&quot;, &quot;log&quot;, &quot;symlog&quot;, &quot;logit&quot;, ...}</span>
<span class="sd">            The axis scale type to apply.</span>

<span class="sd">        **kwargs</span>
<span class="sd">            Different keyword arguments are accepted, depending on the scale.</span>
<span class="sd">            See the respective class keyword arguments:</span>

<span class="sd">            - `matplotlib.scale.LinearScale`</span>
<span class="sd">            - `matplotlib.scale.LogScale`</span>
<span class="sd">            - `matplotlib.scale.SymmetricalLogScale`</span>
<span class="sd">            - `matplotlib.scale.LogitScale`</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        By default, Matplotlib supports the above mentioned scales.</span>
<span class="sd">        Additionally, custom scales may be registered using</span>
<span class="sd">        `matplotlib.scale.register_scale`. These scales can then also</span>
<span class="sd">        be used here.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">old_default_lims</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
                            <span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_shared_y_axes</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">new_default_lims</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
                            <span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">old_default_lims</span> <span class="o">!=</span> <span class="n">new_default_lims</span><span class="p">:</span>
            <span class="c1"># Force autoscaling now, to take advantage of the scale locator&#39;s</span>
            <span class="c1"># nonsingular() before it possibly gets swapped out by the user.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">scalex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">get_yticks</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklocs&quot;</span><span class="p">)</span>
    <span class="n">set_yticks</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;set_ticks&quot;</span><span class="p">)</span>
    <span class="n">get_ymajorticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_majorticklabels&quot;</span><span class="p">)</span>
    <span class="n">get_yminorticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_minorticklabels&quot;</span><span class="p">)</span>
    <span class="n">get_yticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklabels&quot;</span><span class="p">)</span>
    <span class="n">set_yticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span>
        <span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;_set_ticklabels&quot;</span><span class="p">,</span>
        <span class="n">doc_sub</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Axis.set_ticks&quot;</span><span class="p">:</span> <span class="s2">&quot;Axes.set_yticks&quot;</span><span class="p">})</span>

    <span class="n">xaxis_date</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;axis_date&quot;</span><span class="p">)</span>
    <span class="n">yaxis_date</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;axis_date&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_xdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *x* formatted as an x-value.</span>

<span class="sd">        This function will use the `.fmt_xdata` attribute if it is not None,</span>
<span class="sd">        else will fall back on the xaxis major formatter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt_xdata</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_xdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">format_data_short</span><span class="p">)(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_ydata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *y* formatted as an y-value.</span>

<span class="sd">        This function will use the `.fmt_ydata` attribute if it is not None,</span>
<span class="sd">        else will fall back on the yaxis major formatter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt_ydata</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_ydata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">format_data_short</span><span class="p">)(</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a format string formatting the *x*, *y* coordinates.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xs</span> <span class="o">=</span> <span class="s1">&#39;???&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_xdata</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="s1">&#39;???&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_ydata</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;x=</span><span class="si">%s</span><span class="s1"> y=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">minorticks_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display minor ticks on the axes.</span>

<span class="sd">        Displaying minor ticks may reduce performance; you may turn them off</span>
<span class="sd">        using `minorticks_off()` if drawing speed is a problem.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">):</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_scale</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">_scale</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">subs</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;symlog&#39;</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">_scale</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span>
                    <span class="n">mticker</span><span class="o">.</span><span class="n">SymmetricalLogLocator</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">_transform</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">subs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">minorticks_off</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove minor ticks from the axes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">NullLocator</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">NullLocator</span><span class="p">())</span>

    <span class="c1"># Interactive manipulation</span>

    <span class="k">def</span> <span class="nf">can_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *True* if this axes supports the zoom box button functionality.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">can_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *True* if this axes supports any pan/zoom button functionality.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_navigate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether the axes responds to navigation commands</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_navigate</span>

    <span class="k">def</span> <span class="nf">set_navigate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether the axes responds to navigation toolbar commands</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_navigate</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">get_navigate_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the navigation toolbar button status: &#39;PAN&#39;, &#39;ZOOM&#39;, or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_navigate_mode</span>

    <span class="k">def</span> <span class="nf">set_navigate_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the navigation toolbar button status;</span>

<span class="sd">        .. warning::</span>
<span class="sd">            this is not a user-API function.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_navigate_mode</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">_get_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save information required to reproduce the current view.</span>

<span class="sd">        Called before a view is changed, such as during a pan or zoom</span>
<span class="sd">        initiated by the user. You may return any information you deem</span>
<span class="sd">        necessary to describe the view.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types, but if not, the</span>
<span class="sd">            default implementation saves the view limits. You *must* implement</span>
<span class="sd">            :meth:`_set_view` if you implement this method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span>

    <span class="k">def</span> <span class="nf">_set_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply a previously saved view.</span>

<span class="sd">        Called when restoring a view, such as with the navigation buttons.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types, but if not, the</span>
<span class="sd">            default implementation restores the view limits. You *must*</span>
<span class="sd">            implement :meth:`_get_view` if you implement this method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_set_view_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">,</span>
                            <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">twinx</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">twiny</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update view from a selection bbox.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types, but if not, the</span>
<span class="sd">            default implementation sets the view limits to the bbox directly.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bbox : 4-tuple or 3 tuple</span>
<span class="sd">            * If bbox is a 4 tuple, it is the selected bounding box limits,</span>
<span class="sd">              in *display* coordinates.</span>
<span class="sd">            * If bbox is a 3 tuple, it is an (xp, yp, scl) triple, where</span>
<span class="sd">              (xp, yp) is the center of zooming and scl the scale factor to</span>
<span class="sd">              zoom by.</span>

<span class="sd">        direction : str</span>
<span class="sd">            The direction to apply the bounding box.</span>
<span class="sd">                * `&#39;in&#39;` - The bounding box describes the view directly, i.e.,</span>
<span class="sd">                           it zooms in.</span>
<span class="sd">                * `&#39;out&#39;` - The bounding box describes the size to make the</span>
<span class="sd">                            existing view, i.e., it zooms out.</span>

<span class="sd">        mode : str or None</span>
<span class="sd">            The selection mode, whether to apply the bounding box in only the</span>
<span class="sd">            `&#39;x&#39;` direction, `&#39;y&#39;` direction or both (`None`).</span>

<span class="sd">        twinx : bool</span>
<span class="sd">            Whether this axis is twinned in the *x*-direction.</span>

<span class="sd">        twiny : bool</span>
<span class="sd">            Whether this axis is twinned in the *y*-direction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">Xmin</span><span class="p">,</span> <span class="n">Xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="n">Ymin</span><span class="p">,</span> <span class="n">Ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>

            <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span><span class="p">,</span> <span class="n">scl</span> <span class="o">=</span> <span class="n">bbox</span>  <span class="c1"># Zooming code</span>

            <span class="k">if</span> <span class="n">scl</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Should not happen</span>
                <span class="n">scl</span> <span class="o">=</span> <span class="mf">1.</span>

            <span class="k">if</span> <span class="n">scl</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;in&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;out&#39;</span>
                <span class="n">scl</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">scl</span>

            <span class="c1"># get the limits of the axes</span>
            <span class="n">tranD2C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="n">tranD2C</span><span class="p">((</span><span class="n">Xmin</span><span class="p">,</span> <span class="n">Ymin</span><span class="p">))</span>
            <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">tranD2C</span><span class="p">((</span><span class="n">Xmax</span><span class="p">,</span> <span class="n">Ymax</span><span class="p">))</span>

            <span class="c1"># set the range</span>
            <span class="n">xwidth</span> <span class="o">=</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span>
            <span class="n">ywidth</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span>
            <span class="n">xcen</span> <span class="o">=</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">+</span> <span class="n">xmin</span><span class="p">)</span><span class="o">*.</span><span class="mi">5</span>
            <span class="n">ycen</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymax</span> <span class="o">+</span> <span class="n">ymin</span><span class="p">)</span><span class="o">*.</span><span class="mi">5</span>
            <span class="n">xzc</span> <span class="o">=</span> <span class="p">(</span><span class="n">xp</span><span class="o">*</span><span class="p">(</span><span class="n">scl</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">xcen</span><span class="p">)</span><span class="o">/</span><span class="n">scl</span>
            <span class="n">yzc</span> <span class="o">=</span> <span class="p">(</span><span class="n">yp</span><span class="o">*</span><span class="p">(</span><span class="n">scl</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">ycen</span><span class="p">)</span><span class="o">/</span><span class="n">scl</span>

            <span class="n">bbox</span> <span class="o">=</span> <span class="p">[</span><span class="n">xzc</span> <span class="o">-</span> <span class="n">xwidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">,</span> <span class="n">yzc</span> <span class="o">-</span> <span class="n">ywidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">,</span>
                    <span class="n">xzc</span> <span class="o">+</span> <span class="n">xwidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">,</span> <span class="n">yzc</span> <span class="o">+</span> <span class="n">ywidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="c1"># should be len 3 or 4 but nothing else</span>
            <span class="n">cbook</span><span class="o">.</span><span class="n">_warn_external</span><span class="p">(</span>
                <span class="s2">&quot;Warning in _set_view_from_bbox: bounding box is not a tuple &quot;</span>
                <span class="s2">&quot;of length 3 or 4. Ignoring the view change.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Original limits.</span>
        <span class="n">xmin0</span><span class="p">,</span> <span class="n">xmax0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="n">ymin0</span><span class="p">,</span> <span class="n">ymax0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>
        <span class="c1"># The zoom box in screen coords.</span>
        <span class="n">startx</span><span class="p">,</span> <span class="n">starty</span><span class="p">,</span> <span class="n">stopx</span><span class="p">,</span> <span class="n">stopy</span> <span class="o">=</span> <span class="n">bbox</span>
        <span class="c1"># Convert to data coords.</span>
        <span class="p">(</span><span class="n">startx</span><span class="p">,</span> <span class="n">starty</span><span class="p">),</span> <span class="p">(</span><span class="n">stopx</span><span class="p">,</span> <span class="n">stopy</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
            <span class="p">[(</span><span class="n">startx</span><span class="p">,</span> <span class="n">starty</span><span class="p">),</span> <span class="p">(</span><span class="n">stopx</span><span class="p">,</span> <span class="n">stopy</span><span class="p">)])</span>
        <span class="c1"># Clip to axes limits.</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">startx</span><span class="p">,</span> <span class="n">stopx</span><span class="p">]),</span> <span class="n">xmin0</span><span class="p">,</span> <span class="n">xmax0</span><span class="p">)</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">starty</span><span class="p">,</span> <span class="n">stopy</span><span class="p">]),</span> <span class="n">ymin0</span><span class="p">,</span> <span class="n">ymax0</span><span class="p">)</span>
        <span class="c1"># Don&#39;t double-zoom twinned axes or if zooming only the other axis.</span>
        <span class="k">if</span> <span class="n">twinx</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmin0</span><span class="p">,</span> <span class="n">xmax0</span>
        <span class="k">if</span> <span class="n">twiny</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">ymin0</span><span class="p">,</span> <span class="n">ymax0</span>

        <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
            <span class="n">new_xbound</span> <span class="o">=</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span>
            <span class="n">new_ybound</span> <span class="o">=</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span>

        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;out&quot;</span><span class="p">:</span>
            <span class="n">x_trf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
            <span class="n">sxmin0</span><span class="p">,</span> <span class="n">sxmax0</span><span class="p">,</span> <span class="n">sxmin</span><span class="p">,</span> <span class="n">sxmax</span> <span class="o">=</span> <span class="n">x_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                <span class="p">[</span><span class="n">xmin0</span><span class="p">,</span> <span class="n">xmax0</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">])</span>  <span class="c1"># To screen space.</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="p">(</span><span class="n">sxmax0</span> <span class="o">-</span> <span class="n">sxmin0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">sxmax</span> <span class="o">-</span> <span class="n">sxmin</span><span class="p">)</span>  <span class="c1"># Unzoom factor.</span>
            <span class="c1"># Move original bounds away by</span>
            <span class="c1"># (factor) x (distance between unzoom box and axes bbox).</span>
            <span class="n">sxmin1</span> <span class="o">=</span> <span class="n">sxmin0</span> <span class="o">-</span> <span class="n">factor</span> <span class="o">*</span> <span class="p">(</span><span class="n">sxmin</span> <span class="o">-</span> <span class="n">sxmin0</span><span class="p">)</span>
            <span class="n">sxmax1</span> <span class="o">=</span> <span class="n">sxmax0</span> <span class="o">+</span> <span class="n">factor</span> <span class="o">*</span> <span class="p">(</span><span class="n">sxmax0</span> <span class="o">-</span> <span class="n">sxmax</span><span class="p">)</span>
            <span class="c1"># And back to data space.</span>
            <span class="n">new_xbound</span> <span class="o">=</span> <span class="n">x_trf</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">sxmin1</span><span class="p">,</span> <span class="n">sxmax1</span><span class="p">])</span>

            <span class="n">y_trf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
            <span class="n">symin0</span><span class="p">,</span> <span class="n">symax0</span><span class="p">,</span> <span class="n">symin</span><span class="p">,</span> <span class="n">symax</span> <span class="o">=</span> <span class="n">y_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                <span class="p">[</span><span class="n">ymin0</span><span class="p">,</span> <span class="n">ymax0</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">])</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="p">(</span><span class="n">symax0</span> <span class="o">-</span> <span class="n">symin0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">symax</span> <span class="o">-</span> <span class="n">symin</span><span class="p">)</span>
            <span class="n">symin1</span> <span class="o">=</span> <span class="n">symin0</span> <span class="o">-</span> <span class="n">factor</span> <span class="o">*</span> <span class="p">(</span><span class="n">symin</span> <span class="o">-</span> <span class="n">symin0</span><span class="p">)</span>
            <span class="n">symax1</span> <span class="o">=</span> <span class="n">symax0</span> <span class="o">+</span> <span class="n">factor</span> <span class="o">*</span> <span class="p">(</span><span class="n">symax0</span> <span class="o">-</span> <span class="n">symax</span><span class="p">)</span>
            <span class="n">new_ybound</span> <span class="o">=</span> <span class="n">y_trf</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">symin1</span><span class="p">,</span> <span class="n">symax1</span><span class="p">])</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">twinx</span> <span class="ow">and</span> <span class="n">mode</span> <span class="o">!=</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">(</span><span class="n">new_xbound</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">twiny</span> <span class="ow">and</span> <span class="n">mode</span> <span class="o">!=</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">(</span><span class="n">new_ybound</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">start_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when a pan operation has started.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x, y : float</span>
<span class="sd">            The mouse coordinates in display coords.</span>
<span class="sd">        button : `.MouseButton`</span>
<span class="sd">            The pressed mouse button.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This is intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">SimpleNamespace</span><span class="p">(</span>
            <span class="n">lim</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">trans</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">trans_inverse</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">bbox</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">end_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when a pan operation completes (when the mouse button is up.)</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This is intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span>

    <span class="k">def</span> <span class="nf">drag_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when the mouse moves during a pan operation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        button : `.MouseButton`</span>
<span class="sd">            The pressed mouse button.</span>
<span class="sd">        key : str or None</span>
<span class="sd">            The pressed key, if any.</span>
<span class="sd">        x, y : float</span>
<span class="sd">            The mouse coordinates in display coords.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This is intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;control&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="n">dx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dy</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;shift&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span>

        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span>
        <span class="k">if</span> <span class="n">dx</span> <span class="o">==</span> <span class="n">dy</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">translated</span><span class="p">(</span><span class="o">-</span><span class="n">dx</span><span class="p">,</span> <span class="o">-</span><span class="n">dy</span><span class="p">)</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans_inverse</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">width</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">height</span>
                <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_aspect</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;auto&#39;</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">))</span>
                <span class="n">start</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">])</span>
                <span class="n">oldpoints</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">lim</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans</span><span class="p">)</span>
                <span class="n">newpoints</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">oldpoints</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">(</span><span class="n">newpoints</span><span class="p">)</span>
                          <span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans_inverse</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">OverflowError</span><span class="p">:</span>
                <span class="n">cbook</span><span class="o">.</span><span class="n">_warn_external</span><span class="p">(</span><span class="s1">&#39;Overflow while panning&#39;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">valid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans</span><span class="p">))</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get_points</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="c1"># Just ignore invalid limits (typically, underflow in log-scale).</span>
        <span class="n">points</span><span class="p">[</span><span class="o">~</span><span class="n">valid</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">points</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">points</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">get_children</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># docstring inherited.</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_list</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span><span class="p">,</span>
            <span class="o">*</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">legend_</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[]),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">):</span>
        <span class="c1"># docstring inherited.</span>
        <span class="n">inside</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_contains</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">inside</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">inside</span><span class="p">,</span> <span class="n">info</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">contains_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether *point* (pair of pixel coordinates) is inside the axes</span>
<span class="sd">        patch.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains_point</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_default_bbox_extra_artists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a default list of artists that are used for the bounding box</span>
<span class="sd">        calculation.</span>

<span class="sd">        Artists are excluded either by not being visible or</span>
<span class="sd">        ``artist.set_in_layout(False)``.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span><span class="p">):</span>
            <span class="c1"># don&#39;t do bbox on spines if frame not on.</span>
            <span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">spine</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_list</span><span class="p">():</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">_axis</span><span class="p">)</span>

        <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">)</span>
        <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">artist</span> <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">artist</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span> <span class="ow">and</span> <span class="n">artist</span><span class="o">.</span><span class="n">get_in_layout</span><span class="p">())]</span>

    <span class="k">def</span> <span class="nf">get_tightbbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">,</span> <span class="n">call_axes_locator</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                      <span class="n">bbox_extra_artists</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">for_layout_only</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the tight bounding box of the axes, including axis and their</span>
<span class="sd">        decorators (xlabel, title, etc).</span>

<span class="sd">        Artists that have ``artist.set_in_layout(False)`` are not included</span>
<span class="sd">        in the bbox.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        renderer : `.RendererBase` subclass</span>
<span class="sd">            renderer that will be used to draw the figures (i.e.</span>
<span class="sd">            ``fig.canvas.get_renderer()``)</span>

<span class="sd">        bbox_extra_artists : list of `.Artist` or ``None``</span>
<span class="sd">            List of artists to include in the tight bounding box.  If</span>
<span class="sd">            ``None`` (default), then all artist children of the axes are</span>
<span class="sd">            included in the tight bounding box.</span>

<span class="sd">        call_axes_locator : bool, default: True</span>
<span class="sd">            If *call_axes_locator* is ``False``, it does not call the</span>
<span class="sd">            ``_axes_locator`` attribute, which is necessary to get the correct</span>
<span class="sd">            bounding box. ``call_axes_locator=False`` can be used if the</span>
<span class="sd">            caller is only interested in the relative size of the tightbbox</span>
<span class="sd">            compared to the axes bbox.</span>

<span class="sd">        for_layout_only : default: False</span>
<span class="sd">            The bounding box will *not* include the x-extent of the title and</span>
<span class="sd">            the xlabel, or the y-extent of the ylabel.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        `.BboxBase`</span>
<span class="sd">            Bounding box in figure pixel coordinates.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.get_window_extent</span>
<span class="sd">        matplotlib.axis.Axis.get_tightbbox</span>
<span class="sd">        matplotlib.spines.Spine.get_window_extent</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">bb</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">locator</span> <span class="ow">and</span> <span class="n">call_axes_locator</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">bb_xaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span>
                        <span class="n">renderer</span><span class="p">,</span> <span class="n">for_layout_only</span><span class="o">=</span><span class="n">for_layout_only</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="c1"># in case downstream library has redefined axis:</span>
                    <span class="n">bb_xaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">bb_xaxis</span><span class="p">:</span>
                    <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bb_xaxis</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">bb_yaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span>
                        <span class="n">renderer</span><span class="p">,</span> <span class="n">for_layout_only</span><span class="o">=</span><span class="n">for_layout_only</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="c1"># in case downstream library has redefined axis:</span>
                    <span class="n">bb_yaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">bb_yaxis</span><span class="p">:</span>
                    <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bb_yaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_title_position</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="n">axbbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">axbbox</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">title</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="n">bt</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">for_layout_only</span> <span class="ow">and</span> <span class="n">bt</span><span class="o">.</span><span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># make the title bbox 1 pixel wide so its width</span>
                    <span class="c1"># is not accounted for in bbox calculations in</span>
                    <span class="c1"># tight/constrained_layout</span>
                    <span class="n">bt</span><span class="o">.</span><span class="n">x0</span> <span class="o">=</span> <span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">x0</span> <span class="o">+</span> <span class="n">bt</span><span class="o">.</span><span class="n">x1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mf">0.5</span>
                    <span class="n">bt</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="n">bt</span><span class="o">.</span><span class="n">x0</span> <span class="o">+</span> <span class="mf">1.0</span>
                <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bt</span><span class="p">)</span>

        <span class="n">bbox_artists</span> <span class="o">=</span> <span class="n">bbox_extra_artists</span>
        <span class="k">if</span> <span class="n">bbox_artists</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">bbox_artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_default_bbox_extra_artists</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">bbox_artists</span><span class="p">:</span>
            <span class="c1"># Extra check here to quickly see if clipping is on and</span>
            <span class="c1"># contained in the axes.  If it is, don&#39;t get the tightbbox for</span>
            <span class="c1"># this artist because this can be expensive:</span>
            <span class="n">clip_extent</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">_get_clipping_extent_bbox</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">clip_extent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">clip_extent</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span>
                    <span class="n">clip_extent</span><span class="p">,</span> <span class="n">axbbox</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">clip_extent</span><span class="o">.</span><span class="n">extents</span> <span class="o">==</span> <span class="n">axbbox</span><span class="o">.</span><span class="n">extents</span><span class="p">):</span>
                    <span class="c1"># clip extent is inside the axes bbox so don&#39;t check</span>
                    <span class="c1"># this artist</span>
                    <span class="k">continue</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">bbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">bbox</span><span class="o">.</span><span class="n">width</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
                    <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">bbox</span><span class="o">.</span><span class="n">height</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
                <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
            <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bb</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">width</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_make_twin_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make a twinx axes of self. This is used for twinx and twiny.&quot;&quot;&quot;</span>
        <span class="c1"># Typically, SubplotBase._make_twin_axes is called instead of this.</span>
        <span class="k">if</span> <span class="s1">&#39;sharex&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="s1">&#39;sharey&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Twinned Axes may share only one axis&quot;</span><span class="p">)</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="s1">&#39;datalim&#39;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="s1">&#39;datalim&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">twinx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a twin Axes sharing the xaxis.</span>

<span class="sd">        Create a new Axes with an invisible x-axis and an independent</span>
<span class="sd">        y-axis positioned opposite to the original one (i.e. at right). The</span>
<span class="sd">        x-axis autoscale setting will be inherited from the original</span>
<span class="sd">        Axes.  To ensure that the tick marks of both y-axes align, see</span>
<span class="sd">        `~matplotlib.ticker.LinearLocator`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Axes</span>
<span class="sd">            The newly created Axes instance</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        For those who are &#39;picking&#39; artists while using twinx, pick</span>
<span class="sd">        events are only called for the artists in the top-most axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_twin_axes</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_right</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_offset_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_autoscalex_on</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_autoscalex_on</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_left</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">twiny</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a twin Axes sharing the yaxis.</span>

<span class="sd">        Create a new Axes with an invisible y-axis and an independent</span>
<span class="sd">        x-axis positioned opposite to the original one (i.e. at top). The</span>
<span class="sd">        y-axis autoscale setting will be inherited from the original Axes.</span>
<span class="sd">        To ensure that the tick marks of both x-axes align, see</span>
<span class="sd">        `~matplotlib.ticker.LinearLocator`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Axes</span>
<span class="sd">            The newly created Axes instance</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        For those who are &#39;picking&#39; artists while using twiny, pick</span>
<span class="sd">        events are only called for the artists in the top-most axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_twin_axes</span><span class="p">(</span><span class="n">sharey</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_top</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_autoscaley_on</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_autoscaley_on</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_bottom</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">get_shared_x_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a reference to the shared axes Grouper object for x axes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span>

    <span class="k">def</span> <span class="nf">get_shared_y_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a reference to the shared axes Grouper object for y axes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer>
    <div class="footer">
    &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the Matplotlib development team; 2012 - 2020 The Matplotlib development team.
<br />
    Last updated on Aug 24, 2020.
Created using
<a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.
Doc version v3.3.1-dirty.
    </div>
</footer>
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-55954603-1', 'auto');
        ga('send', 'pageview');

</script>
  </body>
</html>